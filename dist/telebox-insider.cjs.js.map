{"version":3,"file":"telebox-insider.cjs.js","sources":["../node_modules/eventemitter3/index.js","../node_modules/stylefire/node_modules/tslib/tslib.es6.js","../node_modules/framesync/dist/framesync.es.js","../node_modules/style-value-types/node_modules/tslib/tslib.es6.js","../node_modules/style-value-types/dist/style-value-types.es.js","../node_modules/stylefire/dist/stylefire.es.js","../node_modules/shallowequal/index.js","../node_modules/side-effect-manager/dist/side-effect-manager.es.js","../node_modules/value-enhancer/dist/value-enhancer.es.js","../src/TeleBox/constants.ts","../src/utils.ts","../src/TeleTitleBar/DefaultTitleBar/index.ts","../src/TeleBox/index.ts","../src/TeleBoxCollector/icons/collector.svg","../src/schedulers.ts","../src/TeleBoxCollector/utils.ts","../src/TeleBoxCollector/index.ts","../src/TeleBoxManager/constants.ts","../src/TeleBoxManager/MaxTitleBar/index.ts","../src/TeleBoxManager/index.ts"],"sourcesContent":["'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { invariant } from 'hey-listen';\n\nvar prevTime = 0;\nvar onNextFrame = typeof window !== 'undefined' && window.requestAnimationFrame !== undefined ? function (callback) {\n    return window.requestAnimationFrame(callback);\n} : function (callback) {\n    var timestamp = Date.now();\n    var timeToCall = Math.max(0, 16.7 - (timestamp - prevTime));\n    prevTime = timestamp + timeToCall;\n    setTimeout(function () {\n        return callback(prevTime);\n    }, timeToCall);\n};\n\nvar createStep = function (setRunNextFrame) {\n    var processToRun = [];\n    var processToRunNextFrame = [];\n    var numThisFrame = 0;\n    var isProcessing = false;\n    var i = 0;\n    var cancelled = new WeakSet();\n    var toKeepAlive = new WeakSet();\n    var renderStep = {\n        cancel: function (process) {\n            var indexOfCallback = processToRunNextFrame.indexOf(process);\n            cancelled.add(process);\n            if (indexOfCallback !== -1) {\n                processToRunNextFrame.splice(indexOfCallback, 1);\n            }\n        },\n        process: function (frame) {\n            var _a;\n            isProcessing = true;\n            _a = [processToRunNextFrame, processToRun], processToRun = _a[0], processToRunNextFrame = _a[1];\n            processToRunNextFrame.length = 0;\n            numThisFrame = processToRun.length;\n            if (numThisFrame) {\n                var process_1;\n                for (i = 0; i < numThisFrame; i++) {\n                    process_1 = processToRun[i];\n                    process_1(frame);\n                    if (toKeepAlive.has(process_1) === true && !cancelled.has(process_1)) {\n                        renderStep.schedule(process_1);\n                        setRunNextFrame(true);\n                    }\n                }\n            }\n            isProcessing = false;\n        },\n        schedule: function (process, keepAlive, immediate) {\n            if (keepAlive === void 0) {\n                keepAlive = false;\n            }\n            if (immediate === void 0) {\n                immediate = false;\n            }\n            invariant(typeof process === \"function\", \"Argument must be a function\");\n            var addToCurrentBuffer = immediate && isProcessing;\n            var buffer = addToCurrentBuffer ? processToRun : processToRunNextFrame;\n            cancelled.delete(process);\n            if (keepAlive) toKeepAlive.add(process);\n            if (buffer.indexOf(process) === -1) {\n                buffer.push(process);\n                if (addToCurrentBuffer) numThisFrame = processToRun.length;\n            }\n        }\n    };\n    return renderStep;\n};\n\nvar maxElapsed = 40;\nvar defaultElapsed = 1 / 60 * 1000;\nvar useDefaultElapsed = true;\nvar willRunNextFrame = false;\nvar isProcessing = false;\nvar frame = {\n    delta: 0,\n    timestamp: 0\n};\nvar stepsOrder = [\"read\", \"update\", \"preRender\", \"render\", \"postRender\"];\nvar setWillRunNextFrame = function (willRun) {\n    return willRunNextFrame = willRun;\n};\nvar steps = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n    acc[key] = createStep(setWillRunNextFrame);\n    return acc;\n}, {});\nvar sync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n    var step = steps[key];\n    acc[key] = function (process, keepAlive, immediate) {\n        if (keepAlive === void 0) {\n            keepAlive = false;\n        }\n        if (immediate === void 0) {\n            immediate = false;\n        }\n        if (!willRunNextFrame) startLoop();\n        step.schedule(process, keepAlive, immediate);\n        return process;\n    };\n    return acc;\n}, {});\nvar cancelSync = /*#__PURE__*/stepsOrder.reduce(function (acc, key) {\n    acc[key] = steps[key].cancel;\n    return acc;\n}, {});\nvar processStep = function (stepId) {\n    return steps[stepId].process(frame);\n};\nvar processFrame = function (timestamp) {\n    willRunNextFrame = false;\n    frame.delta = useDefaultElapsed ? defaultElapsed : Math.max(Math.min(timestamp - frame.timestamp, maxElapsed), 1);\n    if (!useDefaultElapsed) defaultElapsed = frame.delta;\n    frame.timestamp = timestamp;\n    isProcessing = true;\n    stepsOrder.forEach(processStep);\n    isProcessing = false;\n    if (willRunNextFrame) {\n        useDefaultElapsed = false;\n        onNextFrame(processFrame);\n    }\n};\nvar startLoop = function () {\n    willRunNextFrame = true;\n    useDefaultElapsed = true;\n    if (!isProcessing) onNextFrame(processFrame);\n};\nvar getFrameData = function () {\n    return frame;\n};\n\nexport default sync;\nexport { cancelSync, getFrameData };\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __createBinding(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { __assign } from 'tslib';\n\nvar clamp = function (min, max) { return function (v) {\r\n    return Math.max(Math.min(v, max), min);\r\n}; };\r\nvar sanitize = function (v) { return (v % 1 ? Number(v.toFixed(5)) : v); };\r\nvar floatRegex = /(-)?(\\d[\\d\\.]*)/g;\r\nvar colorRegex = /(#[0-9a-f]{6}|#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?[\\d\\.]+%?[,\\s]+){2,3}\\s*\\/*\\s*[\\d\\.]+%?\\))/gi;\r\nvar singleColorRegex = /^(#[0-9a-f]{3}|#(?:[0-9a-f]{2}){2,4}|(rgb|hsl)a?\\((-?[\\d\\.]+%?[,\\s]+){2,3}\\s*\\/*\\s*[\\d\\.]+%?\\))$/i;\n\nvar number = {\r\n    test: function (v) { return typeof v === 'number'; },\r\n    parse: parseFloat,\r\n    transform: function (v) { return v; }\r\n};\r\nvar alpha = __assign(__assign({}, number), { transform: clamp(0, 1) });\r\nvar scale = __assign(__assign({}, number), { default: 1 });\n\nvar createUnitType = function (unit) { return ({\r\n    test: function (v) {\r\n        return typeof v === 'string' && v.endsWith(unit) && v.split(' ').length === 1;\r\n    },\r\n    parse: parseFloat,\r\n    transform: function (v) { return \"\" + v + unit; }\r\n}); };\r\nvar degrees = createUnitType('deg');\r\nvar percent = createUnitType('%');\r\nvar px = createUnitType('px');\r\nvar vh = createUnitType('vh');\r\nvar vw = createUnitType('vw');\r\nvar progressPercentage = __assign(__assign({}, percent), { parse: function (v) { return percent.parse(v) / 100; }, transform: function (v) { return percent.transform(v * 100); } });\n\nvar getValueFromFunctionString = function (value) {\r\n    return value.substring(value.indexOf('(') + 1, value.lastIndexOf(')'));\r\n};\r\nvar clampRgbUnit = clamp(0, 255);\r\nvar isRgba = function (v) { return v.red !== undefined; };\r\nvar isHsla = function (v) { return v.hue !== undefined; };\r\nfunction getValuesAsArray(value) {\r\n    return getValueFromFunctionString(value)\r\n        .replace(/(,|\\/)/g, ' ')\r\n        .split(/ \\s*/);\r\n}\r\nvar splitColorValues = function (terms) {\r\n    return function (v) {\r\n        if (typeof v !== 'string')\r\n            return v;\r\n        var values = {};\r\n        var valuesArray = getValuesAsArray(v);\r\n        for (var i = 0; i < 4; i++) {\r\n            values[terms[i]] =\r\n                valuesArray[i] !== undefined ? parseFloat(valuesArray[i]) : 1;\r\n        }\r\n        return values;\r\n    };\r\n};\r\nvar rgbaTemplate = function (_a) {\r\n    var red = _a.red, green = _a.green, blue = _a.blue, _b = _a.alpha, alpha = _b === void 0 ? 1 : _b;\r\n    return \"rgba(\" + red + \", \" + green + \", \" + blue + \", \" + alpha + \")\";\r\n};\r\nvar hslaTemplate = function (_a) {\r\n    var hue = _a.hue, saturation = _a.saturation, lightness = _a.lightness, _b = _a.alpha, alpha = _b === void 0 ? 1 : _b;\r\n    return \"hsla(\" + hue + \", \" + saturation + \", \" + lightness + \", \" + alpha + \")\";\r\n};\r\nvar rgbUnit = __assign(__assign({}, number), { transform: function (v) { return Math.round(clampRgbUnit(v)); } });\r\nfunction isColorString(color, colorType) {\r\n    return color.startsWith(colorType) && singleColorRegex.test(color);\r\n}\r\nvar rgba = {\r\n    test: function (v) { return (typeof v === 'string' ? isColorString(v, 'rgb') : isRgba(v)); },\r\n    parse: splitColorValues(['red', 'green', 'blue', 'alpha']),\r\n    transform: function (_a) {\r\n        var red = _a.red, green = _a.green, blue = _a.blue, _b = _a.alpha, alpha$1 = _b === void 0 ? 1 : _b;\r\n        return rgbaTemplate({\r\n            red: rgbUnit.transform(red),\r\n            green: rgbUnit.transform(green),\r\n            blue: rgbUnit.transform(blue),\r\n            alpha: sanitize(alpha.transform(alpha$1))\r\n        });\r\n    }\r\n};\r\nvar hsla = {\r\n    test: function (v) { return (typeof v === 'string' ? isColorString(v, 'hsl') : isHsla(v)); },\r\n    parse: splitColorValues(['hue', 'saturation', 'lightness', 'alpha']),\r\n    transform: function (_a) {\r\n        var hue = _a.hue, saturation = _a.saturation, lightness = _a.lightness, _b = _a.alpha, alpha$1 = _b === void 0 ? 1 : _b;\r\n        return hslaTemplate({\r\n            hue: Math.round(hue),\r\n            saturation: percent.transform(sanitize(saturation)),\r\n            lightness: percent.transform(sanitize(lightness)),\r\n            alpha: sanitize(alpha.transform(alpha$1))\r\n        });\r\n    }\r\n};\r\nvar hex = __assign(__assign({}, rgba), { test: function (v) { return typeof v === 'string' && isColorString(v, '#'); }, parse: function (v) {\r\n        var r = '';\r\n        var g = '';\r\n        var b = '';\r\n        if (v.length > 4) {\r\n            r = v.substr(1, 2);\r\n            g = v.substr(3, 2);\r\n            b = v.substr(5, 2);\r\n        }\r\n        else {\r\n            r = v.substr(1, 1);\r\n            g = v.substr(2, 1);\r\n            b = v.substr(3, 1);\r\n            r += r;\r\n            g += g;\r\n            b += b;\r\n        }\r\n        return {\r\n            red: parseInt(r, 16),\r\n            green: parseInt(g, 16),\r\n            blue: parseInt(b, 16),\r\n            alpha: 1\r\n        };\r\n    } });\r\nvar color = {\r\n    test: function (v) {\r\n        return (typeof v === 'string' && singleColorRegex.test(v)) ||\r\n            isRgba(v) ||\r\n            isHsla(v);\r\n    },\r\n    parse: function (v) {\r\n        if (rgba.test(v)) {\r\n            return rgba.parse(v);\r\n        }\r\n        else if (hsla.test(v)) {\r\n            return hsla.parse(v);\r\n        }\r\n        else if (hex.test(v)) {\r\n            return hex.parse(v);\r\n        }\r\n        return v;\r\n    },\r\n    transform: function (v) {\r\n        if (isRgba(v)) {\r\n            return rgba.transform(v);\r\n        }\r\n        else if (isHsla(v)) {\r\n            return hsla.transform(v);\r\n        }\r\n        return v;\r\n    }\r\n};\n\nvar COLOR_TOKEN = '${c}';\r\nvar NUMBER_TOKEN = '${n}';\r\nvar convertNumbersToZero = function (v) {\r\n    return typeof v === 'number' ? 0 : v;\r\n};\r\nvar complex = {\r\n    test: function (v) {\r\n        if (typeof v !== 'string' || !isNaN(v))\r\n            return false;\r\n        var numValues = 0;\r\n        var foundNumbers = v.match(floatRegex);\r\n        var foundColors = v.match(colorRegex);\r\n        if (foundNumbers)\r\n            numValues += foundNumbers.length;\r\n        if (foundColors)\r\n            numValues += foundColors.length;\r\n        return numValues > 0;\r\n    },\r\n    parse: function (v) {\r\n        var input = v;\r\n        var parsed = [];\r\n        var foundColors = input.match(colorRegex);\r\n        if (foundColors) {\r\n            input = input.replace(colorRegex, COLOR_TOKEN);\r\n            parsed.push.apply(parsed, foundColors.map(color.parse));\r\n        }\r\n        var foundNumbers = input.match(floatRegex);\r\n        if (foundNumbers) {\r\n            parsed.push.apply(parsed, foundNumbers.map(number.parse));\r\n        }\r\n        return parsed;\r\n    },\r\n    createTransformer: function (prop) {\r\n        var template = prop;\r\n        var token = 0;\r\n        var foundColors = prop.match(colorRegex);\r\n        var numColors = foundColors ? foundColors.length : 0;\r\n        if (foundColors) {\r\n            for (var i = 0; i < numColors; i++) {\r\n                template = template.replace(foundColors[i], COLOR_TOKEN);\r\n                token++;\r\n            }\r\n        }\r\n        var foundNumbers = template.match(floatRegex);\r\n        var numNumbers = foundNumbers ? foundNumbers.length : 0;\r\n        if (foundNumbers) {\r\n            for (var i = 0; i < numNumbers; i++) {\r\n                template = template.replace(foundNumbers[i], NUMBER_TOKEN);\r\n                token++;\r\n            }\r\n        }\r\n        return function (v) {\r\n            var output = template;\r\n            for (var i = 0; i < token; i++) {\r\n                output = output.replace(i < numColors ? COLOR_TOKEN : NUMBER_TOKEN, i < numColors ? color.transform(v[i]) : sanitize(v[i]));\r\n            }\r\n            return output;\r\n        };\r\n    },\r\n    getAnimatableNone: function (target) {\r\n        var parsedTarget = complex.parse(target);\r\n        var targetTransformer = complex.createTransformer(target);\r\n        return targetTransformer(parsedTarget.map(convertNumbersToZero));\r\n    }\r\n};\n\nexport { alpha, color, complex, degrees, hex, hsla, number, percent, progressPercentage, px, rgbUnit, rgba, scale, vh, vw };\n","import { __rest, __assign } from 'tslib';\nimport sync from 'framesync';\nimport { number, color, px, degrees, scale, alpha, progressPercentage } from 'style-value-types';\nimport { invariant } from 'hey-listen';\n\nvar createStyler = function (_a) {\n    var onRead = _a.onRead,\n        onRender = _a.onRender,\n        _b = _a.uncachedValues,\n        uncachedValues = _b === void 0 ? new Set() : _b,\n        _c = _a.useCache,\n        useCache = _c === void 0 ? true : _c;\n    return function (_a) {\n        if (_a === void 0) {\n            _a = {};\n        }\n        var props = __rest(_a, []);\n        var state = {};\n        var changedValues = [];\n        var hasChanged = false;\n        function setValue(key, value) {\n            if (key.startsWith('--')) {\n                props.hasCSSVariable = true;\n            }\n            var currentValue = state[key];\n            state[key] = value;\n            if (state[key] === currentValue) return;\n            if (changedValues.indexOf(key) === -1) {\n                changedValues.push(key);\n            }\n            if (!hasChanged) {\n                hasChanged = true;\n                sync.render(styler.render);\n            }\n        }\n        var styler = {\n            get: function (key, forceRead) {\n                if (forceRead === void 0) {\n                    forceRead = false;\n                }\n                var useCached = !forceRead && useCache && !uncachedValues.has(key) && state[key] !== undefined;\n                return useCached ? state[key] : onRead(key, props);\n            },\n            set: function (values, value) {\n                if (typeof values === 'string') {\n                    setValue(values, value);\n                } else {\n                    for (var key in values) {\n                        setValue(key, values[key]);\n                    }\n                }\n                return this;\n            },\n            render: function (forceRender) {\n                if (forceRender === void 0) {\n                    forceRender = false;\n                }\n                if (hasChanged || forceRender === true) {\n                    onRender(state, props, changedValues);\n                    hasChanged = false;\n                    changedValues.length = 0;\n                }\n                return this;\n            }\n        };\n        return styler;\n    };\n};\n\nvar CAMEL_CASE_PATTERN = /([a-z])([A-Z])/g;\nvar REPLACE_TEMPLATE = '$1-$2';\nvar camelToDash = function (str) {\n    return str.replace(CAMEL_CASE_PATTERN, REPLACE_TEMPLATE).toLowerCase();\n};\n\nvar camelCache = /*#__PURE__*/new Map();\nvar dashCache = /*#__PURE__*/new Map();\nvar prefixes = ['Webkit', 'Moz', 'O', 'ms', ''];\nvar numPrefixes = prefixes.length;\nvar isBrowser = typeof document !== 'undefined';\nvar testElement;\nvar setDashPrefix = function (key, prefixed) {\n    return dashCache.set(key, camelToDash(prefixed));\n};\nvar testPrefix = function (key) {\n    testElement = testElement || document.createElement('div');\n    for (var i = 0; i < numPrefixes; i++) {\n        var prefix = prefixes[i];\n        var noPrefix = prefix === '';\n        var prefixedPropertyName = noPrefix ? key : prefix + key.charAt(0).toUpperCase() + key.slice(1);\n        if (prefixedPropertyName in testElement.style || noPrefix) {\n            if (noPrefix && key === 'clipPath' && dashCache.has(key)) {\n                return;\n            }\n            camelCache.set(key, prefixedPropertyName);\n            setDashPrefix(key, \"\" + (noPrefix ? '' : '-') + camelToDash(prefixedPropertyName));\n        }\n    }\n};\nvar setServerProperty = function (key) {\n    return setDashPrefix(key, key);\n};\nvar prefixer = function (key, asDashCase) {\n    if (asDashCase === void 0) {\n        asDashCase = false;\n    }\n    var cache = asDashCase ? dashCache : camelCache;\n    if (!cache.has(key)) {\n        isBrowser ? testPrefix(key) : setServerProperty(key);\n    }\n    return cache.get(key) || key;\n};\n\nvar axes = ['', 'X', 'Y', 'Z'];\nvar order = ['translate', 'scale', 'rotate', 'skew', 'transformPerspective'];\nvar transformProps = /*#__PURE__*/order.reduce(function (acc, key) {\n    return axes.reduce(function (axesAcc, axesKey) {\n        axesAcc.push(key + axesKey);\n        return axesAcc;\n    }, acc);\n}, ['x', 'y', 'z']);\nvar transformPropDictionary = /*#__PURE__*/transformProps.reduce(function (dict, key) {\n    dict[key] = true;\n    return dict;\n}, {});\nfunction isTransformProp(key) {\n    return transformPropDictionary[key] === true;\n}\nfunction sortTransformProps(a, b) {\n    return transformProps.indexOf(a) - transformProps.indexOf(b);\n}\nvar transformOriginProps = /*#__PURE__*/new Set(['originX', 'originY', 'originZ']);\nfunction isTransformOriginProp(key) {\n    return transformOriginProps.has(key);\n}\n\nvar int = /*#__PURE__*/__assign( /*#__PURE__*/__assign({}, number), { transform: Math.round });\nvar valueTypes = {\n    color: color,\n    backgroundColor: color,\n    outlineColor: color,\n    fill: color,\n    stroke: color,\n    borderColor: color,\n    borderTopColor: color,\n    borderRightColor: color,\n    borderBottomColor: color,\n    borderLeftColor: color,\n    borderWidth: px,\n    borderTopWidth: px,\n    borderRightWidth: px,\n    borderBottomWidth: px,\n    borderLeftWidth: px,\n    borderRadius: px,\n    radius: px,\n    borderTopLeftRadius: px,\n    borderTopRightRadius: px,\n    borderBottomRightRadius: px,\n    borderBottomLeftRadius: px,\n    width: px,\n    maxWidth: px,\n    height: px,\n    maxHeight: px,\n    size: px,\n    top: px,\n    right: px,\n    bottom: px,\n    left: px,\n    padding: px,\n    paddingTop: px,\n    paddingRight: px,\n    paddingBottom: px,\n    paddingLeft: px,\n    margin: px,\n    marginTop: px,\n    marginRight: px,\n    marginBottom: px,\n    marginLeft: px,\n    rotate: degrees,\n    rotateX: degrees,\n    rotateY: degrees,\n    rotateZ: degrees,\n    scale: scale,\n    scaleX: scale,\n    scaleY: scale,\n    scaleZ: scale,\n    skew: degrees,\n    skewX: degrees,\n    skewY: degrees,\n    distance: px,\n    translateX: px,\n    translateY: px,\n    translateZ: px,\n    x: px,\n    y: px,\n    z: px,\n    perspective: px,\n    opacity: alpha,\n    originX: progressPercentage,\n    originY: progressPercentage,\n    originZ: px,\n    zIndex: int,\n    fillOpacity: alpha,\n    strokeOpacity: alpha,\n    numOctaves: int\n};\nvar getValueType = function (key) {\n    return valueTypes[key];\n};\nvar getValueAsType = function (value, type) {\n    return type && typeof value === 'number' ? type.transform(value) : value;\n};\n\nvar SCROLL_LEFT = 'scrollLeft';\nvar SCROLL_TOP = 'scrollTop';\nvar scrollKeys = /*#__PURE__*/new Set([SCROLL_LEFT, SCROLL_TOP]);\n\nvar blacklist = /*#__PURE__*/new Set([SCROLL_LEFT, SCROLL_TOP, 'transform']);\nvar translateAlias = {\n    x: 'translateX',\n    y: 'translateY',\n    z: 'translateZ'\n};\nfunction isCustomTemplate(v) {\n    return typeof v === 'function';\n}\nfunction buildTransform(state, transform, transformKeys, transformIsDefault, enableHardwareAcceleration, allowTransformNone) {\n    if (allowTransformNone === void 0) {\n        allowTransformNone = true;\n    }\n    var transformString = '';\n    var transformHasZ = false;\n    transformKeys.sort(sortTransformProps);\n    var numTransformKeys = transformKeys.length;\n    for (var i = 0; i < numTransformKeys; i++) {\n        var key = transformKeys[i];\n        transformString += (translateAlias[key] || key) + \"(\" + transform[key] + \") \";\n        transformHasZ = key === 'z' ? true : transformHasZ;\n    }\n    if (!transformHasZ && enableHardwareAcceleration) {\n        transformString += 'translateZ(0)';\n    } else {\n        transformString = transformString.trim();\n    }\n    if (isCustomTemplate(state.transform)) {\n        transformString = state.transform(transform, transformIsDefault ? '' : transformString);\n    } else if (allowTransformNone && transformIsDefault) {\n        transformString = 'none';\n    }\n    return transformString;\n}\nfunction buildStyleProperty(state, enableHardwareAcceleration, styles, transform, transformOrigin, transformKeys, isDashCase, allowTransformNone) {\n    if (enableHardwareAcceleration === void 0) {\n        enableHardwareAcceleration = true;\n    }\n    if (styles === void 0) {\n        styles = {};\n    }\n    if (transform === void 0) {\n        transform = {};\n    }\n    if (transformOrigin === void 0) {\n        transformOrigin = {};\n    }\n    if (transformKeys === void 0) {\n        transformKeys = [];\n    }\n    if (isDashCase === void 0) {\n        isDashCase = false;\n    }\n    if (allowTransformNone === void 0) {\n        allowTransformNone = true;\n    }\n    var transformIsDefault = true;\n    var hasTransform = false;\n    var hasTransformOrigin = false;\n    for (var key in state) {\n        var value = state[key];\n        var valueType = getValueType(key);\n        var valueAsType = getValueAsType(value, valueType);\n        if (isTransformProp(key)) {\n            hasTransform = true;\n            transform[key] = valueAsType;\n            transformKeys.push(key);\n            if (transformIsDefault) {\n                if (valueType.default && value !== valueType.default || !valueType.default && value !== 0) {\n                    transformIsDefault = false;\n                }\n            }\n        } else if (isTransformOriginProp(key)) {\n            transformOrigin[key] = valueAsType;\n            hasTransformOrigin = true;\n        } else if (!blacklist.has(key) || !isCustomTemplate(valueAsType)) {\n            styles[prefixer(key, isDashCase)] = valueAsType;\n        }\n    }\n    if (hasTransform || typeof state.transform === 'function') {\n        styles.transform = buildTransform(state, transform, transformKeys, transformIsDefault, enableHardwareAcceleration, allowTransformNone);\n    }\n    if (hasTransformOrigin) {\n        styles.transformOrigin = (transformOrigin.originX || '50%') + \" \" + (transformOrigin.originY || '50%') + \" \" + (transformOrigin.originZ || 0);\n    }\n    return styles;\n}\nfunction createStyleBuilder(_a) {\n    var _b = _a === void 0 ? {} : _a,\n        _c = _b.enableHardwareAcceleration,\n        enableHardwareAcceleration = _c === void 0 ? true : _c,\n        _d = _b.isDashCase,\n        isDashCase = _d === void 0 ? true : _d,\n        _e = _b.allowTransformNone,\n        allowTransformNone = _e === void 0 ? true : _e;\n    var styles = {};\n    var transform = {};\n    var transformOrigin = {};\n    var transformKeys = [];\n    return function (state) {\n        transformKeys.length = 0;\n        buildStyleProperty(state, enableHardwareAcceleration, styles, transform, transformOrigin, transformKeys, isDashCase, allowTransformNone);\n        return styles;\n    };\n}\n\nfunction onRead(key, options) {\n    var element = options.element,\n        preparseOutput = options.preparseOutput;\n    var defaultValueType = getValueType(key);\n    if (isTransformProp(key)) {\n        return defaultValueType ? defaultValueType.default || 0 : 0;\n    } else if (scrollKeys.has(key)) {\n        return element[key];\n    } else {\n        var domValue = window.getComputedStyle(element, null).getPropertyValue(prefixer(key, true)) || 0;\n        return preparseOutput && defaultValueType && defaultValueType.test(domValue) && defaultValueType.parse ? defaultValueType.parse(domValue) : domValue;\n    }\n}\nfunction onRender(state, _a, changedValues) {\n    var element = _a.element,\n        buildStyles = _a.buildStyles,\n        hasCSSVariable = _a.hasCSSVariable;\n    Object.assign(element.style, buildStyles(state));\n    if (hasCSSVariable) {\n        var numChangedValues = changedValues.length;\n        for (var i = 0; i < numChangedValues; i++) {\n            var key = changedValues[i];\n            if (key.startsWith('--')) {\n                element.style.setProperty(key, state[key]);\n            }\n        }\n    }\n    if (changedValues.indexOf(SCROLL_LEFT) !== -1) {\n        element[SCROLL_LEFT] = state[SCROLL_LEFT];\n    }\n    if (changedValues.indexOf(SCROLL_TOP) !== -1) {\n        element[SCROLL_TOP] = state[SCROLL_TOP];\n    }\n}\nvar cssStyler = /*#__PURE__*/createStyler({\n    onRead: onRead,\n    onRender: onRender,\n    uncachedValues: scrollKeys\n});\nfunction createCssStyler(element, _a) {\n    if (_a === void 0) {\n        _a = {};\n    }\n    var enableHardwareAcceleration = _a.enableHardwareAcceleration,\n        allowTransformNone = _a.allowTransformNone,\n        props = __rest(_a, [\"enableHardwareAcceleration\", \"allowTransformNone\"]);\n    return cssStyler(__assign({ element: element, buildStyles: createStyleBuilder({\n            enableHardwareAcceleration: enableHardwareAcceleration,\n            allowTransformNone: allowTransformNone\n        }), preparseOutput: true }, props));\n}\n\nvar camelCaseAttributes = /*#__PURE__*/new Set(['baseFrequency', 'diffuseConstant', 'kernelMatrix', 'kernelUnitLength', 'keySplines', 'keyTimes', 'limitingConeAngle', 'markerHeight', 'markerWidth', 'numOctaves', 'targetX', 'targetY', 'surfaceScale', 'specularConstant', 'specularExponent', 'stdDeviation', 'tableValues']);\n\nvar defaultOrigin = 0.5;\nvar svgAttrsTemplate = function () {\n    return {\n        style: {}\n    };\n};\nvar progressToPixels = function (progress, length) {\n    return px.transform(progress * length);\n};\nvar unmeasured = { x: 0, y: 0, width: 0, height: 0 };\nfunction calcOrigin(origin, offset, size) {\n    return typeof origin === 'string' ? origin : px.transform(offset + size * origin);\n}\nfunction calculateSVGTransformOrigin(dimensions, originX, originY) {\n    return calcOrigin(originX, dimensions.x, dimensions.width) + \" \" + calcOrigin(originY, dimensions.y, dimensions.height);\n}\nvar svgStyleConfig = {\n    enableHardwareAcceleration: false,\n    isDashCase: false\n};\nfunction buildSVGAttrs(_a, dimensions, totalPathLength, cssBuilder, attrs, isDashCase) {\n    if (dimensions === void 0) {\n        dimensions = unmeasured;\n    }\n    if (cssBuilder === void 0) {\n        cssBuilder = createStyleBuilder(svgStyleConfig);\n    }\n    if (attrs === void 0) {\n        attrs = svgAttrsTemplate();\n    }\n    if (isDashCase === void 0) {\n        isDashCase = true;\n    }\n    var attrX = _a.attrX,\n        attrY = _a.attrY,\n        originX = _a.originX,\n        originY = _a.originY,\n        pathLength = _a.pathLength,\n        _b = _a.pathSpacing,\n        pathSpacing = _b === void 0 ? 1 : _b,\n        _c = _a.pathOffset,\n        pathOffset = _c === void 0 ? 0 : _c,\n        state = __rest(_a, [\"attrX\", \"attrY\", \"originX\", \"originY\", \"pathLength\", \"pathSpacing\", \"pathOffset\"]);\n    var style = cssBuilder(state);\n    for (var key in style) {\n        if (key === 'transform') {\n            attrs.style.transform = style[key];\n        } else {\n            var attrKey = isDashCase && !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n            attrs[attrKey] = style[key];\n        }\n    }\n    if (originX !== undefined || originY !== undefined || style.transform) {\n        attrs.style.transformOrigin = calculateSVGTransformOrigin(dimensions, originX !== undefined ? originX : defaultOrigin, originY !== undefined ? originY : defaultOrigin);\n    }\n    if (attrX !== undefined) attrs.x = attrX;\n    if (attrY !== undefined) attrs.y = attrY;\n    if (totalPathLength !== undefined && pathLength !== undefined) {\n        attrs[isDashCase ? 'stroke-dashoffset' : 'strokeDashoffset'] = progressToPixels(-pathOffset, totalPathLength);\n        attrs[isDashCase ? 'stroke-dasharray' : 'strokeDasharray'] = progressToPixels(pathLength, totalPathLength) + \" \" + progressToPixels(pathSpacing, totalPathLength);\n    }\n    return attrs;\n}\nfunction createAttrBuilder(dimensions, totalPathLength, isDashCase) {\n    if (isDashCase === void 0) {\n        isDashCase = true;\n    }\n    var attrs = svgAttrsTemplate();\n    var cssBuilder = createStyleBuilder(svgStyleConfig);\n    return function (state) {\n        return buildSVGAttrs(state, dimensions, totalPathLength, cssBuilder, attrs, isDashCase);\n    };\n}\n\nvar getDimensions = function (element) {\n    return typeof element.getBBox === 'function' ? element.getBBox() : element.getBoundingClientRect();\n};\nvar getSVGElementDimensions = function (element) {\n    try {\n        return getDimensions(element);\n    } catch (e) {\n        return { x: 0, y: 0, width: 0, height: 0 };\n    }\n};\n\nvar isPath = function (element) {\n    return element.tagName === 'path';\n};\nvar svgStyler = /*#__PURE__*/createStyler({\n    onRead: function (key, _a) {\n        var element = _a.element;\n        key = !camelCaseAttributes.has(key) ? camelToDash(key) : key;\n        if (!isTransformProp(key)) {\n            return element.getAttribute(key);\n        } else {\n            var valueType = getValueType(key);\n            return valueType ? valueType.default || 0 : 0;\n        }\n    },\n    onRender: function (state, _a) {\n        var element = _a.element,\n            buildAttrs = _a.buildAttrs;\n        var attrs = buildAttrs(state);\n        for (var key in attrs) {\n            if (key === 'style') {\n                Object.assign(element.style, attrs.style);\n            } else {\n                element.setAttribute(key, attrs[key]);\n            }\n        }\n    }\n});\nvar svg = function (element) {\n    var dimensions = getSVGElementDimensions(element);\n    var pathLength = isPath(element) && element.getTotalLength ? element.getTotalLength() : undefined;\n    return svgStyler({\n        element: element,\n        buildAttrs: createAttrBuilder(dimensions, pathLength)\n    });\n};\n\nvar viewport = /*#__PURE__*/createStyler({\n    useCache: false,\n    onRead: function (key) {\n        return key === 'scrollTop' ? window.pageYOffset : window.pageXOffset;\n    },\n    onRender: function (_a) {\n        var _b = _a.scrollTop,\n            scrollTop = _b === void 0 ? 0 : _b,\n            _c = _a.scrollLeft,\n            scrollLeft = _c === void 0 ? 0 : _c;\n        return window.scrollTo(scrollLeft, scrollTop);\n    }\n});\n\nvar cache = /*#__PURE__*/new WeakMap();\nvar isHTMLElement = function (node) {\n    return node instanceof HTMLElement || typeof node.click === 'function';\n};\nvar isSVGElement = function (node) {\n    return node instanceof SVGElement || 'ownerSVGElement' in node;\n};\nvar createDOMStyler = function (node, props) {\n    var styler;\n    if (node === window) {\n        styler = viewport(node);\n    } else if (isHTMLElement(node)) {\n        styler = createCssStyler(node, props);\n    } else if (isSVGElement(node)) {\n        styler = svg(node);\n    }\n    invariant(styler !== undefined, 'No valid node provided. Node must be HTMLElement, SVGElement or window.');\n    cache.set(node, styler);\n    return styler;\n};\nvar getStyler = function (node, props) {\n    return cache.has(node) ? cache.get(node) : createDOMStyler(node, props);\n};\nfunction index(nodeOrSelector, props) {\n    var node = typeof nodeOrSelector === 'string' ? document.querySelector(nodeOrSelector) : nodeOrSelector;\n    return getStyler(node, props);\n}\n\nexport default index;\nexport { buildSVGAttrs, buildStyleProperty, createStyler as createStylerFactory, isTransformProp, transformProps };\n","//\n\nmodule.exports = function shallowEqual(objA, objB, compare, compareContext) {\n  var ret = compare ? compare.call(compareContext, objA, objB) : void 0;\n\n  if (ret !== void 0) {\n    return !!ret;\n  }\n\n  if (objA === objB) {\n    return true;\n  }\n\n  if (typeof objA !== \"object\" || !objA || typeof objB !== \"object\" || !objB) {\n    return false;\n  }\n\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  var bHasOwnProperty = Object.prototype.hasOwnProperty.bind(objB);\n\n  // Test for A's keys different from B.\n  for (var idx = 0; idx < keysA.length; idx++) {\n    var key = keysA[idx];\n\n    if (!bHasOwnProperty(key)) {\n      return false;\n    }\n\n    var valueA = objA[key];\n    var valueB = objB[key];\n\n    ret = compare ? compare.call(compareContext, valueA, valueB, key) : void 0;\n\n    if (ret === false || (ret === void 0 && valueA !== valueB)) {\n      return false;\n    }\n  }\n\n  return true;\n};\n","const e=\"!#%()*+,-./:;=?@[]^_`{|}~ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789\",s=e.length,t=Array(20),r=()=>{for(let r=0;r<20;r++)t[r]=e.charAt(Math.random()*s);return t.join(\"\")};class o{constructor(){this.disposers=new Map}add(e,s=r()){return this.flush(s),this.disposers.set(s,e()),s}addDisposer(e,s=r()){return this.flush(s),this.disposers.set(s,e),s}addEventListener(e,s,t,o,i=r()){return this.add((()=>(e.addEventListener(s,t,o),()=>e.removeEventListener(s,t,o))),i),i}setTimeout(e,s,t=r()){return this.add((()=>{const r=window.setTimeout((()=>{this.remove(t),e()}),s);return()=>window.clearTimeout(r)}),t)}setInterval(e,s,t=r()){return this.add((()=>{const t=window.setInterval(e,s);return()=>window.clearInterval(t)}),t)}remove(e){const s=this.disposers.get(e);return this.disposers.delete(e),s}flush(e){const s=this.remove(e);if(s)try{s()}catch(t){console.error(t)}}flushAll(){this.disposers.forEach((e=>{try{e()}catch(s){console.error(s)}})),this.disposers.clear()}}export{o as SideEffectManager,r as genUID};\n//# sourceMappingURL=side-effect-manager.es.js.map\n","var e=Object.defineProperty,s=(\"undefined\"!=typeof require&&require,(s,r,t)=>(((s,r,t)=>{r in s?e(s,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[r]=t})(s,\"symbol\"!=typeof r?r+\"\":r,t),t));class r{constructor(e,r){s(this,\"_value\"),s(this,\"_beforeDestroys\"),s(this,\"_subscribers\"),this._value=e,r&&(this.compare=r)}get value(){return this._value}setValue(e,s){if(!this.compare(e,this._value)){const r=this._value;this._value=e,this._subscribers&&this._subscribers.forEach((t=>t(e,r,s)))}}reaction(e){return this._subscribers||(this._subscribers=new Set),this._subscribers.add(e),()=>{this._subscribers&&this._subscribers.delete(e)}}subscribe(e,s){const r=this.reaction(e);return e(this._value,void 0,s),r}derive(e,s,t){const i=new r(e(this.value,void 0,t),s),o=this.reaction(((s,r,t)=>{i.setValue(e(s,r,t))}));return i.addBeforeDestroy(o),i}destroy(){this._beforeDestroys&&(this._beforeDestroys.forEach((e=>e())),this._beforeDestroys.clear()),this._subscribers&&this._subscribers.clear()}addBeforeDestroy(e){return this._beforeDestroys||(this._beforeDestroys=new Set),this._beforeDestroys.add(e),()=>{this._beforeDestroys&&this._beforeDestroys.delete(e)}}compare(e,s){return e===s}}function t(e,s,t,i){let o=e.map((e=>e.value));const u=new r(s(o,void 0,i),t);return e.forEach(((e,r)=>{const t=e.reaction(((e,t,i)=>{const c=o.slice();c[r]=e;const n=o;o=c,u.setValue(s(c,n,i),i)}));u.addBeforeDestroy(t)})),u}function i(e,s){Object.keys(s).forEach((r=>{u(e,r,s[r])}))}function o(e){return(s,r)=>(u(e,s,r),r)}function u(e,s,r){var t;return Object.defineProperties(e,{[s]:{get:()=>r.value},[`_${s}$`]:{value:r},[`set${t=s,t[0].toUpperCase()+t.slice(1)}`]:{value:(e,s)=>r.setValue(e,s)}}),e}function c(e){const s=s=>{const r=e.addDisposer((()=>{s.destroy()}));return s.addBeforeDestroy((()=>{e.remove(r)})),s};return{bindSideEffect:s,combine:(e,r,i,o)=>s(t(e,r,i,o)),createVal:(e,t)=>s(new r(e,t))}}export{r as Val,u as bindInstance,t as combine,o as createInstanceBinder,c as createSideEffectBinder,i as withValueEnhancer};\n//# sourceMappingURL=value-enhancer.es.js.map\n","export enum TELE_BOX_COLOR_SCHEME {\n    Light = \"light\",\n    Dark = \"dark\",\n    Auto = \"auto\",\n}\n\nexport enum TELE_BOX_STATE {\n    Normal = \"normal\",\n    Minimized = \"minimized\",\n    Maximized = \"maximized\",\n}\n\nexport enum TELE_BOX_EVENT {\n    DarkMode = \"dark_mode\",\n    PrefersColorScheme = \"prefers_color_scheme\",\n    Close = \"close\",\n    Focus = \"focus\",\n    Blur = \"blur\",\n    Move = \"move\",\n    Resize = \"resize\",\n    IntrinsicMove = \"intrinsic_move\",\n    IntrinsicResize = \"intrinsic_resize\",\n    VisualResize = \"visual_resize\",\n    ZIndex = \"z_index\",\n    State = \"state\",\n    Minimized = \"minimized\",\n    Maximized = \"maximized\",\n    Readonly = \"readonly\",\n    Destroyed = \"destroyed\",\n}\n\nexport enum TELE_BOX_DELEGATE_EVENT {\n    Close = \"close\",\n    Maximize = \"maximize\",\n    Minimize = \"minimize\",\n}\n\nexport enum TELE_BOX_RESIZE_HANDLE {\n    North = \"n\",\n    South = \"s\",\n    West = \"w\",\n    East = \"e\",\n    NorthWest = \"nw\",\n    NorthEast = \"ne\",\n    SouthEast = \"se\",\n    SouthWest = \"sw\",\n}\n\nexport const TeleBoxDragHandleType = \"dh\";\n","export function clamp(value: number, min: number, max: number): number {\n    return Math.min(Math.max(value, min), max);\n}\n\nexport function preventEvent(ev: Event): void {\n    ev.stopPropagation();\n    if (ev.cancelable) {\n        ev.preventDefault();\n    }\n}\n\nexport function getRandomInt(min: number, max: number): number {\n    min = Math.ceil(min);\n    max = Math.floor(max);\n    return Math.floor(Math.random() * (max - min + 1)) + min;\n}\n\nlet defaultBoxCount = 1;\n\nexport function getBoxDefaultName(): string {\n    return `New Box ${defaultBoxCount++}`;\n}\n\nexport function identity<TValue>(value: TValue): TValue {\n    return value;\n}\n\nexport function isTruthy<TValue>(value: TValue): boolean {\n    return Boolean(value);\n}\n\nexport function isFalsy<TValue>(value: TValue): boolean {\n    return !value;\n}\n\nexport function findMaxItem<TValue>(arr: TValue[], key: keyof TValue): TValue {\n    const max = arr.reduce((maxItem, current) => {\n        return current[key] > maxItem[key] ? current : maxItem;\n    });\n\n    return max;\n}\n\nexport function uniqueByObjectKey<TValue>(\n    arr: TValue[],\n    key: keyof TValue\n): TValue[] {\n    return arr.reduce((acc, item) => {\n        if (!acc.find((j) => j[key] == item[key])) acc.push(item);\n        return acc;\n    }, [] as TValue[]);\n}\n\nexport function uniqueByVal<T>(arr: T[]): T[] {\n    return arr.reduce((acc, item) => {\n        if (!acc.includes(item)) acc.push(item);\n        return acc;\n    }, [] as T[]);\n}\n\nexport function removeByVal<T>(arr: T[], val: T): T[] {\n    const index = arr.indexOf(val);\n\n    if (index < 0) {\n        return arr;\n    }\n\n    const newArr = [...arr];\n\n    newArr.splice(index, 1);\n\n    return newArr;\n}\n\nexport function removeByIndex(arr: any[], index: number): any[] {\n    const newArr = [...arr];\n\n    if (index < 0 || index > arr.length) return arr;\n\n    newArr.splice(index, 1);\n\n    return newArr;\n}\n\nexport function removeValues<T>(array: T[], valuesToRemove: T[]): T[] {\n    return array.filter((item) => !valuesToRemove.includes(item));\n}\n\nexport function excludeFromBoth<T>(c: T[], a: T[], b: T[]): T[] {\n    const aSet = new Set(a);\n    const bSet = new Set(b);\n    return c.filter((item) => !aSet.has(item) && !bSet.has(item));\n}\n\nexport const isIOS = (): boolean => {\n    return (\n        typeof navigator !== \"undefined\" &&\n        typeof window !== \"undefined\" &&\n        /iPad|iPhone|iPod/.test(window.navigator.userAgent)\n    );\n};\n\nexport const isAndroid = (): boolean => {\n    return typeof navigator !== \"undefined\" && /Android/.test(window.navigator.userAgent);\n};\n\nexport function flattenEvent(ev: MouseEvent | TouchEvent): MouseEvent | Touch {\n    return (ev as TouchEvent).touches\n        ? (ev as TouchEvent).touches[0]\n        : (ev as MouseEvent);\n}\n\nexport function genUniqueKey(): string {\n    return (\n        Date.now().toString().slice(6) + Math.random().toString().slice(2, 8)\n    );\n}\n","import \"./style.scss\";\n\nimport { SideEffectManager } from \"side-effect-manager\";\n\nimport {\n    TeleBoxDragHandleType,\n    TELE_BOX_DELEGATE_EVENT,\n    TELE_BOX_STATE,\n} from \"../../TeleBox/constants\";\nimport type { TeleBoxState } from \"../../TeleBox/typings\";\nimport type {\n    TeleTitleBar,\n    TeleTitleBarConfig,\n    TeleTitleBarEvent,\n} from \"../typings\";\nimport { preventEvent } from \"../../utils\";\n\nexport type DefaultTitleBarButton = TeleTitleBarEvent & {\n    readonly iconClassName: string;\n    readonly isActive?: (state: TeleBoxState) => boolean;\n};\n\nexport interface DefaultTitleBarConfig extends TeleTitleBarConfig {\n    buttons?: ReadonlyArray<DefaultTitleBarButton>;\n}\n\nexport class DefaultTitleBar implements TeleTitleBar {\n    public constructor({\n        readonly = false,\n        title,\n        buttons,\n        onEvent,\n        onDragStart,\n        namespace = \"telebox\",\n        state = TELE_BOX_STATE.Normal,\n    }: DefaultTitleBarConfig = {}) {\n        this.readonly = readonly;\n        this.onEvent = onEvent;\n        this.onDragStart = onDragStart;\n        this.namespace = namespace;\n        this.title = title;\n        this.state = state;\n\n        this.buttons = buttons || [\n            {\n                type: TELE_BOX_DELEGATE_EVENT.Minimize,\n                iconClassName: this.wrapClassName(\"titlebar-icon-minimize\"),\n            },\n            {\n                type: TELE_BOX_DELEGATE_EVENT.Maximize,\n                iconClassName: this.wrapClassName(\"titlebar-icon-maximize\"),\n                isActive: (state) => state === TELE_BOX_STATE.Maximized,\n            },\n            {\n                type: TELE_BOX_DELEGATE_EVENT.Close,\n                iconClassName: this.wrapClassName(\"titlebar-icon-close\"),\n            },\n        ];\n\n        this.$dragArea = this.renderDragArea();\n    }\n\n    public readonly namespace: string;\n\n    public $titleBar: HTMLElement | undefined;\n\n    public $title: HTMLElement | undefined;\n\n    public $dragArea: HTMLElement;\n\n    public setTitle(title: string): void {\n        this.title = title;\n        if (this.$title) {\n            this.$title.textContent = title;\n            this.$title.title = title;\n        }\n    }\n\n    public setState(state: TeleBoxState): void {\n        if (this.state !== state) {\n            this.state = state;\n\n            this.buttons.forEach((btn, i) => {\n                if (btn.isActive) {\n                    this.$btns[i].classList.toggle(\n                        \"is-active\",\n                        btn.isActive(state)\n                    );\n                }\n            });\n        }\n    }\n\n    public setReadonly(readonly: boolean): void {\n        if (this.readonly !== readonly) {\n            this.readonly = readonly;\n        }\n    }\n\n    public render(): HTMLElement {\n        if (!this.$titleBar) {\n            this.$titleBar = document.createElement(\"div\");\n            this.$titleBar.className = this.wrapClassName(\"titlebar\");\n\n            const $titleArea = document.createElement(\"div\");\n            $titleArea.className = this.wrapClassName(\"title-area\");\n            $titleArea.dataset.teleBoxHandle = TeleBoxDragHandleType;\n\n            this.$title = document.createElement(\"h1\");\n            this.$title.className = this.wrapClassName(\"title\");\n            this.$title.dataset.teleBoxHandle = TeleBoxDragHandleType;\n            if (this.title) {\n                this.$title.textContent = this.title;\n                this.$title.title = this.title;\n            }\n\n            $titleArea.appendChild(this.$title);\n            $titleArea.appendChild(this.$dragArea);\n\n            const $buttonsContainer = document.createElement(\"div\");\n            $buttonsContainer.className = this.wrapClassName(\"titlebar-btns\");\n\n            this.buttons.forEach(({ iconClassName, isActive }, i) => {\n                const teleTitleBarBtnIndex = String(i);\n\n                const $btn = document.createElement(\"button\");\n                $btn.className = `${this.wrapClassName(\n                    \"titlebar-btn\"\n                )} ${iconClassName}`;\n                $btn.dataset.teleTitleBarBtnIndex = teleTitleBarBtnIndex;\n                $btn.dataset.teleTitleBarNoDblClick = \"true\";\n\n                if (isActive) {\n                    $btn.classList.toggle(\"is-active\", isActive(this.state));\n                }\n\n                this.$btns.push($btn);\n\n                $buttonsContainer.appendChild($btn);\n            });\n\n            this.sideEffect.addEventListener(\n                $buttonsContainer,\n                \"click\",\n                (ev) => {\n                    if (this.readonly) {\n                        return;\n                    }\n                    const target = ev.target as HTMLElement;\n                    const teleTitleBarBtnIndex = Number(\n                        target.dataset?.teleTitleBarBtnIndex\n                    );\n                    if (\n                        !Number.isNaN(teleTitleBarBtnIndex) &&\n                        teleTitleBarBtnIndex < this.buttons.length\n                    ) {\n                        preventEvent(ev);\n                        const btn = this.buttons[teleTitleBarBtnIndex];\n                        if (this.onEvent) {\n                            this.onEvent({\n                                type: btn.type,\n                                value: btn.value,\n                            } as TeleTitleBarEvent);\n                        }\n                    }\n                }\n            );\n\n            this.$titleBar.appendChild($titleArea);\n            this.$titleBar.appendChild($buttonsContainer);\n        }\n\n        return this.$titleBar;\n    }\n\n    public renderDragArea(): HTMLElement {\n        const $dragArea = document.createElement(\"div\");\n        $dragArea.className = this.wrapClassName(\"drag-area\");\n        $dragArea.dataset.teleBoxHandle = TeleBoxDragHandleType;\n        this.sideEffect.addEventListener(\n            $dragArea,\n            \"mousedown\",\n            this.handleTitleBarClick\n        );\n        this.sideEffect.addEventListener(\n            $dragArea,\n            \"touchstart\",\n            this.handleTitleBarTouch,\n            { passive: true }\n        );\n        return $dragArea;\n    }\n\n    public dragHandle(): HTMLElement | undefined {\n        return this.$titleBar;\n    }\n\n    public wrapClassName(className: string): string {\n        return `${this.namespace}-${className}`;\n    }\n\n    public destroy(): void {\n        this.sideEffect.flushAll();\n        if (this.$titleBar) {\n            this.$titleBar = void 0;\n            this.$title = void 0;\n            this.$btns.length = 0;\n            this.onDragStart = void 0;\n            this.onEvent = void 0;\n        }\n    }\n\n    public onEvent?: TeleTitleBarConfig[\"onEvent\"];\n\n    public onDragStart?: TeleTitleBarConfig[\"onDragStart\"];\n\n    protected readonly: boolean;\n\n    protected title?: string;\n\n    protected buttons: ReadonlyArray<DefaultTitleBarButton>;\n\n    protected state: TeleBoxState;\n\n    protected $btns: HTMLButtonElement[] = [];\n\n    protected sideEffect = new SideEffectManager();\n\n    protected lastTitleBarClick = {\n        timestamp: 0,\n        clientX: -100,\n        clientY: -100,\n    };\n\n    protected handleTitleBarClick = (ev: MouseEvent): void => {\n        if (this.readonly) {\n            return;\n        }\n\n        if (ev.button !== 0) {\n            return; // Not left mouse\n        }\n\n        if ((ev.target as HTMLElement).dataset?.teleTitleBarNoDblClick) {\n            return; // btns\n        }\n\n        preventEvent(ev);\n\n        const now = Date.now();\n        if (now - this.lastTitleBarClick.timestamp <= 500) {\n            if (\n                Math.abs(ev.clientX - this.lastTitleBarClick.clientX) <= 5 &&\n                Math.abs(ev.clientY - this.lastTitleBarClick.clientY) <= 5\n            ) {\n                // double click\n                if (this.onEvent) {\n                    this.onEvent({ type: TELE_BOX_DELEGATE_EVENT.Maximize });\n                }\n            }\n        } else if (this.onDragStart) {\n            this.onDragStart(ev);\n        }\n        this.lastTitleBarClick.timestamp = now;\n        this.lastTitleBarClick.clientX = ev.clientX;\n        this.lastTitleBarClick.clientY = ev.clientY;\n    };\n\n    protected lastTitleBarTouch = {\n        timestamp: 0,\n        clientX: -100,\n        clientY: -100,\n    };\n\n    protected handleTitleBarTouch = (ev: TouchEvent): void => {\n        if (this.readonly) {\n            return;\n        }\n\n        if ((ev.target as HTMLElement).dataset?.teleTitleBarNoDblClick) {\n            return; // btns\n        }\n\n        preventEvent(ev);\n\n        const now = Date.now();\n        const {\n            clientX = this.lastTitleBarTouch.clientX + 100,\n            clientY = this.lastTitleBarTouch.clientY + 100,\n        } = ev.touches[0] || {};\n\n        if (now - this.lastTitleBarTouch.timestamp <= 500) {\n            if (\n                Math.abs(clientX - this.lastTitleBarTouch.clientX) <= 10 &&\n                Math.abs(clientY - this.lastTitleBarTouch.clientY) <= 10\n            ) {\n                // double click\n                if (this.onEvent) {\n                    this.onEvent({ type: TELE_BOX_DELEGATE_EVENT.Maximize });\n                }\n            }\n        } else if (this.onDragStart) {\n            this.onDragStart(ev);\n        }\n        this.lastTitleBarTouch.timestamp = now;\n        this.lastTitleBarTouch.clientX = clientX;\n        this.lastTitleBarTouch.clientY = clientY;\n    };\n}\n","import \"./style.scss\";\n\nimport EventEmitter from \"eventemitter3\";\nimport styler from \"stylefire\";\nimport shallowequal from \"shallowequal\";\nimport { SideEffectManager } from \"side-effect-manager\";\nimport type {\n    Val,\n    ValEnhancedResult,\n    ValSideEffectBinder,\n\n} from \"value-enhancer\";\nimport {\n    createSideEffectBinder,\n    withValueEnhancer\n} from \"value-enhancer\";\nimport type { TeleTitleBar } from \"../TeleTitleBar\";\nimport {DefaultTitleBar} from \"../TeleTitleBar\"\nimport {\n    clamp,\n    flattenEvent,\n    genUniqueKey,\n    getBoxDefaultName,\n    isFalsy,\n    isTruthy,\n    preventEvent,\n} from \"../utils\";\nimport {\n    TELE_BOX_EVENT,\n    TELE_BOX_STATE,\n    TELE_BOX_RESIZE_HANDLE,\n    TELE_BOX_DELEGATE_EVENT,\n    TELE_BOX_COLOR_SCHEME,\n} from \"./constants\";\nimport type {\n    TeleBoxConfig,\n    TeleBoxRect,\n    TeleBoxEvents,\n    TeleBoxHandleType,\n    TeleBoxState,\n    TeleBoxDelegateEvents,\n    TeleBoxCoord,\n    TeleBoxSize,\n    TeleBoxColorScheme,\n} from \"./typings\";\nimport { AnyToVoidFunction } from \"../schedulers\";\n\nexport * from \"./constants\";\nexport * from \"./typings\";\n\ntype ValConfig = {\n    prefersColorScheme: Val<TeleBoxColorScheme, boolean>;\n    darkMode: Val<boolean, boolean>;\n    containerRect: Val<TeleBoxRect, boolean>;\n    collectorRect: Val<TeleBoxRect | undefined, boolean>;\n    /** Box title. Default empty. */\n    title: Val<string, boolean>;\n    /** Is box visible */\n    visible: Val<boolean, boolean>;\n    /** Is box readonly */\n    readonly: Val<boolean, boolean>;\n    /** Able to resize box window */\n    resizable: Val<boolean, boolean>;\n    /** Able to drag box window */\n    draggable: Val<boolean, boolean>;\n    /** Restrict box to always be within the containing area. */\n    fence: Val<boolean, boolean>;\n    /** Fixed width/height ratio for box window. */\n    fixRatio: Val<boolean, boolean>;\n    focus: Val<boolean, boolean>;\n    zIndex: Val<number, boolean>;\n    /** Is box minimized. Default false. */\n    minimized: Val<boolean, boolean>;\n    /** Is box maximized. Default false. */\n    maximized: Val<boolean, boolean>;\n    $userContent: Val<HTMLElement | undefined>;\n    $userFooter: Val<HTMLElement | undefined>;\n    $userStyles: Val<HTMLStyleElement | undefined>;\n};\nexport interface TeleBox extends ValEnhancedResult<ValConfig> {}\n\nexport class TeleBox {\n    public constructor({\n        id = genUniqueKey(),\n        title = getBoxDefaultName(),\n        prefersColorScheme = TELE_BOX_COLOR_SCHEME.Light,\n        darkMode,\n        visible = true,\n        width = 0.5,\n        height = 0.5,\n        minWidth = 0,\n        minHeight = 0,\n        x = 0.1,\n        y = 0.1,\n        minimized = false,\n        maximized = false,\n        readonly = false,\n        resizable = true,\n        draggable = true,\n        fence = true,\n        fixRatio = false,\n        focus = false,\n        zIndex = 100,\n        namespace = \"telebox\",\n        titleBar,\n        content,\n        footer,\n        styles,\n        containerRect = {\n            x: 0,\n            y: 0,\n            width: window.innerWidth,\n            height: window.innerHeight,\n        },\n        collectorRect,\n    }: TeleBoxConfig = {}) {\n        this._sideEffect = new SideEffectManager();\n        this._valSideEffectBinder = createSideEffectBinder((this._sideEffect as any));\n        const { combine, createVal } = this._valSideEffectBinder;\n\n        this.id = id;\n        this.namespace = namespace;\n        this.events = new EventEmitter();\n        this._delegateEvents = new EventEmitter();\n\n        const prefersColorScheme$ = createVal<TeleBoxColorScheme, boolean>(\n            prefersColorScheme\n        );\n        prefersColorScheme$.reaction((prefersColorScheme, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(\n                    TELE_BOX_EVENT.PrefersColorScheme,\n                    prefersColorScheme\n                );\n            }\n        });\n\n        const darkMode$ = createVal(Boolean(darkMode));\n\n        if (darkMode == null) {\n            prefersColorScheme$.subscribe(\n                (prefersColorScheme, _, skipUpdate) => {\n                    this._sideEffect.add(() => {\n                        if (prefersColorScheme === \"auto\") {\n                            const prefersDark = window.matchMedia(\n                                \"(prefers-color-scheme: dark)\"\n                            );\n                            if (prefersDark) {\n                                darkMode$.setValue(\n                                    prefersDark.matches,\n                                    skipUpdate\n                                );\n                                const handler = (\n                                    evt: MediaQueryListEvent\n                                ): void => {\n                                    darkMode$.setValue(evt.matches, skipUpdate);\n                                };\n                                prefersDark.addListener(handler);\n                                return () =>\n                                    prefersDark.removeListener(handler);\n                            } else {\n                                return noop;\n                            }\n                        } else {\n                            darkMode$.setValue(\n                                prefersColorScheme === \"dark\",\n                                skipUpdate\n                            );\n                            return noop;\n                        }\n                    }, \"prefers-color-scheme\");\n                }\n            );\n        }\n\n        darkMode$.reaction((darkMode, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_EVENT.DarkMode, darkMode);\n            }\n        });\n\n        const containerRect$ = createVal(containerRect, shallowequal);\n        const collectorRect$ = createVal(collectorRect, shallowequal);\n\n        const title$ = createVal(title);\n        title$.reaction((title, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.titleBar.setTitle(title);\n            }\n        });\n\n        const visible$ = createVal(visible);\n        visible$.reaction((visible, _, skipUpdate) => {\n            if (!skipUpdate && !visible) {\n                this.events.emit(TELE_BOX_EVENT.Close);\n            }\n        });\n\n        const readonly$ = createVal(readonly);\n        readonly$.reaction((readonly, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_EVENT.Readonly, readonly);\n            }\n        });\n\n        const resizable$ = createVal(resizable);\n        const draggable$ = createVal(draggable);\n        const fence$ = createVal(fence);\n        const fixRatio$ = createVal(fixRatio);\n\n        const zIndex$ = createVal(zIndex);\n        zIndex$.reaction((zIndex, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_EVENT.ZIndex, zIndex);\n            }\n        });\n\n        const focus$ = createVal(focus);\n        focus$.reaction((focus, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(\n                    focus ? TELE_BOX_EVENT.Focus : TELE_BOX_EVENT.Blur\n                );\n            }\n        });\n\n        const minimized$ = createVal(minimized);\n        minimized$.reaction((minimized, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_EVENT.Minimized, minimized);\n            }\n        });\n\n        const maximized$ = createVal(maximized);\n        maximized$.reaction((maximized, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_EVENT.Maximized, maximized);\n            }\n        });\n\n        const state$ = combine(\n            [minimized$, maximized$],\n            ([minimized, maximized]): TeleBoxState =>\n                minimized\n                    ? TELE_BOX_STATE.Minimized\n                    : maximized\n                    ? TELE_BOX_STATE.Maximized\n                    : TELE_BOX_STATE.Normal\n        );\n        state$.reaction((state, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_EVENT.State, state);\n            }\n        });\n\n        const minSize$ = createVal(\n            {\n                width: clamp(minWidth, 0, 1),\n                height: clamp(minHeight, 0, 1),\n            },\n            shallowequal\n        );\n\n        const intrinsicSize$ = createVal(\n            {\n                width: clamp(width, minSize$.value.width, 1),\n                height: clamp(height, minSize$.value.height, 1),\n            },\n            shallowequal\n        );\n        minSize$.reaction((minSize, _, skipUpdate) => {\n            intrinsicSize$.setValue(\n                {\n                    width: clamp(width, minSize.width, 1),\n                    height: clamp(height, minSize.height, 1),\n                },\n                skipUpdate\n            );\n        });\n        intrinsicSize$.reaction((size, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_EVENT.IntrinsicResize, size);\n            }\n        });\n\n        const size$ = combine(\n            [intrinsicSize$, maximized$],\n            ([intrinsicSize, maximized]) => {\n                if (maximized) {\n                    return { width: 1, height: 1 };\n                }\n                return intrinsicSize;\n            },\n            shallowequal\n        );\n        size$.reaction((size, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_EVENT.Resize, size);\n            }\n        });\n\n        const visualSize$ = combine(\n            [size$, minimized$, containerRect$, collectorRect$],\n            ([size, minimized, containerRect, collectorRect]) => {\n                if (minimized && collectorRect) {\n                    return {\n                        width:\n                            collectorRect.width /\n                            size.width /\n                            containerRect.width,\n                        height:\n                            collectorRect.height /\n                            size.height /\n                            containerRect.height,\n                    };\n                }\n                return size;\n            },\n            shallowequal\n        );\n        visualSize$.reaction((size, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_EVENT.VisualResize, size);\n            }\n        });\n\n        const intrinsicCoord$ = createVal(\n            { x: clamp(x, 0, 1), y: clamp(y, 0, 1) },\n            shallowequal\n        );\n        intrinsicCoord$.reaction((coord, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_EVENT.IntrinsicMove, coord);\n            }\n        });\n\n        const coord$ = combine(\n            [\n                intrinsicCoord$,\n                intrinsicSize$,\n                containerRect$,\n                collectorRect$,\n                minimized$,\n                maximized$,\n            ],\n            ([\n                intrinsicCoord,\n                intrinsicSize,\n                containerRect,\n                collectorRect,\n                minimized,\n                maximized,\n            ]) => {\n                if (minimized && collectorRect) {\n                    if (maximized) {\n                        return {\n                            x:\n                                (collectorRect.x + collectorRect.width / 2) /\n                                    containerRect.width -\n                                1 / 2,\n                            y:\n                                (collectorRect.y + collectorRect.height / 2) /\n                                    containerRect.height -\n                                1 / 2,\n                        };\n                    }\n                    return {\n                        x:\n                            (collectorRect.x + collectorRect.width / 2) /\n                                containerRect.width -\n                            intrinsicSize.width / 2,\n                        y:\n                            (collectorRect.y + collectorRect.height / 2) /\n                                containerRect.height -\n                            intrinsicSize.height / 2,\n                    };\n                }\n                if (maximized) {\n                    return { x: 0, y: 0 };\n                }\n                return intrinsicCoord;\n            },\n            shallowequal\n        );\n        coord$.reaction((coord, _, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_EVENT.Move, coord);\n            }\n        });\n\n        this.titleBar =\n            titleBar ||\n            new DefaultTitleBar({\n                readonly: readonly$.value,\n                title: title$.value,\n                namespace: this.namespace,\n                onDragStart: (event) => this._handleTrackStart?.(event),\n                onEvent: (event): void => {\n                    if (this._delegateEvents.listeners.length > 0) {\n                        this._delegateEvents.emit(event.type);\n                    } else {\n                        switch (event.type) {\n                            case TELE_BOX_DELEGATE_EVENT.Maximize: {\n                                maximized$.setValue(!maximized$.value);\n                                break;\n                            }\n                            case TELE_BOX_DELEGATE_EVENT.Minimize: {\n                                minimized$.setValue(true);\n                                break;\n                            }\n                            case TELE_BOX_DELEGATE_EVENT.Close: {\n                                visible$.setValue(false);\n                                break;\n                            }\n                            default: {\n                                console.error(\n                                    \"Unsupported titleBar event:\",\n                                    event\n                                );\n                                break;\n                            }\n                        }\n                    }\n                },\n            });\n        readonly$.reaction((readonly) => {\n            this.titleBar.setReadonly(readonly);\n        });\n\n        const $userContent$ = createVal(content);\n        const $userFooter$ = createVal(footer);\n        const $userStyles$ = createVal(styles);\n\n        const valConfig: ValConfig = {\n            prefersColorScheme: prefersColorScheme$,\n            darkMode: darkMode$,\n            containerRect: containerRect$,\n            collectorRect: collectorRect$,\n            title: title$,\n            visible: visible$,\n            readonly: readonly$,\n            resizable: resizable$,\n            draggable: draggable$,\n            fence: fence$,\n            fixRatio: fixRatio$,\n            focus: focus$,\n            zIndex: zIndex$,\n            minimized: minimized$,\n            maximized: maximized$,\n            $userContent: $userContent$,\n            $userFooter: $userFooter$,\n            $userStyles: $userStyles$,\n        };\n\n        withValueEnhancer(this, valConfig);\n\n        this._state$ = state$;\n        this._minSize$ = minSize$;\n        this._size$ = size$;\n        this._intrinsicSize$ = intrinsicSize$;\n        this._visualSize$ = visualSize$;\n        this._coord$ = coord$;\n        this._intrinsicCoord$ = intrinsicCoord$;\n\n        if (this.fixRatio) {\n            this.transform(\n                coord$.value.x,\n                coord$.value.y,\n                size$.value.width,\n                size$.value.height,\n                true\n            );\n        }\n\n        this.$box = this.render();\n    }\n\n    public readonly id: string;\n\n    /** ClassName Prefix. For CSS styling. Default \"telebox\" */\n    public readonly namespace: string;\n\n    public readonly events: TeleBoxEvents;\n\n    public readonly _delegateEvents: TeleBoxDelegateEvents;\n\n    protected _sideEffect: SideEffectManager;\n\n    protected _valSideEffectBinder: ValSideEffectBinder;\n\n    public titleBar: TeleTitleBar;\n\n    public _minSize$: Val<TeleBoxSize, boolean>;\n    public _size$: Val<TeleBoxSize, boolean>;\n    public _intrinsicSize$: Val<TeleBoxSize, boolean>;\n    public _visualSize$: Val<TeleBoxSize, boolean>;\n    public _coord$: Val<TeleBoxCoord, boolean>;\n    public _intrinsicCoord$: Val<TeleBoxCoord, boolean>;\n\n    public get darkMode(): boolean {\n        return this._darkMode$.value;\n    }\n\n    public _state$: Val<TeleBoxState, boolean>;\n\n    public get state(): TeleBoxState {\n        return this._state$.value;\n    }\n\n    /** @deprecated use setMaximized and setMinimized instead */\n    public setState(state: TeleBoxState, skipUpdate = false): this {\n        switch (state) {\n            case TELE_BOX_STATE.Maximized: {\n                this.setMinimized(false, skipUpdate);\n                this.setMaximized(true, skipUpdate);\n                break;\n            }\n            case TELE_BOX_STATE.Minimized: {\n                this.setMinimized(true, skipUpdate);\n                this.setMaximized(false, skipUpdate);\n                break;\n            }\n            default: {\n                this.setMinimized(false, skipUpdate);\n                this.setMaximized(false, skipUpdate);\n                break;\n            }\n        }\n        return this;\n    }\n\n    /** Minimum box width relative to container element. 0~1. Default 0. */\n    public get minWidth(): number {\n        return this._minSize$.value.width;\n    }\n\n    /** Minimum box height relative to container element. 0~1. Default 0. */\n    public get minHeight(): number {\n        return this._minSize$.value.height;\n    }\n\n    /**\n     * @param minWidth Minimum box width relative to container element. 0~1.\n     * @returns this\n     */\n    public setMinWidth(minWidth: number, skipUpdate = false): this {\n        this._minSize$.setValue(\n            { width: minWidth, height: this.minHeight },\n            skipUpdate\n        );\n        return this;\n    }\n\n    /**\n     * @param minHeight Minimum box height relative to container element. 0~1.\n     * @returns this\n     */\n    public setMinHeight(minHeight: number, skipUpdate = false): this {\n        this._minSize$.setValue(\n            { width: this.minWidth, height: minHeight },\n            skipUpdate\n        );\n        return this;\n    }\n\n    /** Intrinsic box width relative to container element(without counting the effect of maximization or minimization). 0~1. Default 0.5. */\n    public get intrinsicWidth(): number {\n        return this._intrinsicSize$.value.width;\n    }\n\n    /** Intrinsic box height relative to container element(without counting the effect of maximization or minimization). 0~1. Default 0.5. */\n    public get intrinsicHeight(): number {\n        return this._intrinsicSize$.value.height;\n    }\n\n    /**\n     * Resize box.\n     * @param width Box width relative to container element. 0~1.\n     * @param height Box height relative to container element. 0~1.\n     * @param skipUpdate Skip emitting event.\n     * @returns this\n     */\n    public resize(width: number, height: number, skipUpdate = false): this {\n        this._intrinsicSize$.setValue({ width, height }, skipUpdate);\n        return this;\n    }\n\n    /** Box width relative to container element. 0~1. Default 0.5. */\n    public get width(): number {\n        return this._size$.value.width;\n    }\n\n    /** Box height relative to container element. 0~1. Default 0.5. */\n    public get height(): number {\n        return this._size$.value.height;\n    }\n\n    /** Box width in pixels. */\n    public get absoluteWidth(): number {\n        return this.width * this.containerRect.width;\n    }\n\n    /** Box height in pixels. */\n    public get absoluteHeight(): number {\n        return this.height * this.containerRect.height;\n    }\n\n    /** Actual rendered box width relative to container element. 0~1. Default 0.5. */\n    public get visualWidth(): number {\n        return this._visualSize$.value.width;\n    }\n\n    /** Actual rendered box height relative to container element. 0~1. Default 0.5. */\n    public get visualHeight(): number {\n        return this._visualSize$.value.height;\n    }\n\n    /** Intrinsic box x position relative to container element(without counting the effect of maximization or minimization). 0~1. Default 0.1. */\n    public get intrinsicX(): number {\n        return this._intrinsicCoord$.value.x;\n    }\n\n    /** Intrinsic box y position relative to container element(without counting the effect of maximization or minimization). 0~1. Default 0.1. */\n    public get intrinsicY(): number {\n        return this._intrinsicCoord$.value.y;\n    }\n\n    /**\n     * Move box position.\n     * @param x x position relative to container element. 0~1.\n     * @param y y position relative to container element. 0~1.\n     * @param skipUpdate Skip emitting event.\n     * @returns this\n     */\n    public move(x: number, y: number, skipUpdate = false): this {\n        this._intrinsicCoord$.setValue({ x, y }, skipUpdate);\n        return this;\n    }\n\n    /** Box x position relative to container element. 0~1. Default 0.1. */\n    public get x(): number {\n        return this._coord$.value.x;\n    }\n\n    /** Box y position relative to container element. 0~1. Default 0.1. */\n    public get y(): number {\n        return this._coord$.value.y;\n    }\n\n    /**\n     * Resize + Move, with respect to fixed ratio.\n     * @param x x position relative to container element. 0~1.\n     * @param y y position relative to container element. 0~1.\n     * @param width Box width relative to container element. 0~1.\n     * @param height Box height relative to container element. 0~1.\n     * @param skipUpdate Skip emitting event.\n     * @returns this\n     */\n    public transform(\n        x: number,\n        y: number,\n        width: number,\n        height: number,\n        skipUpdate = false\n    ): this {\n        if (this.fixRatio) {\n            const newHeight =\n                (this.intrinsicHeight / this.intrinsicWidth) * width;\n            if (y !== this.intrinsicY) {\n                y -= newHeight - height;\n            }\n            height = newHeight;\n        }\n\n        if (y < 0) {\n            y = 0;\n            if (height > this.intrinsicHeight) {\n                height = this.intrinsicHeight;\n            }\n        }\n\n        this._intrinsicCoord$.setValue(\n            {\n                x: width >= this.minWidth ? x : this.intrinsicX,\n                y: height >= this.minHeight ? y : this.intrinsicY,\n            },\n            skipUpdate\n        );\n        this._intrinsicSize$.setValue(\n            {\n                width: clamp(width, this.minWidth, 1),\n                height: clamp(height, this.minHeight, 1),\n            },\n            skipUpdate\n        );\n\n        return this;\n    }\n\n    /**\n     * Mount box to a container element.\n     */\n    public mount(container: HTMLElement): this {\n        container.appendChild(this.render());\n        return this;\n    }\n\n    /**\n     * Unmount box from the container element.\n     */\n    public unmount(): this {\n        if (this.$box) {\n            this.$box.remove();\n        }\n        return this;\n    }\n\n    /**\n     * Mount dom to box content.\n     */\n    public mountContent(content: HTMLElement): this {\n        this.set$userContent(content);\n        return this;\n    }\n\n    /**\n     * Unmount content from the box.\n     */\n    public unmountContent(): this {\n        this.set$userContent(undefined);\n        return this;\n    }\n\n    /**\n     * Mount dom to box Footer.\n     */\n    public mountFooter(footer: HTMLElement): this {\n        this.set$userFooter(footer);\n        return this;\n    }\n\n    /**\n     * Unmount Footer from the box.\n     */\n    public unmountFooter(): this {\n        this.set$userFooter(undefined);\n        return this;\n    }\n\n    public getUserStyles(): HTMLStyleElement | undefined {\n        return this.$userStyles;\n    }\n\n    public mountStyles(styles: string | HTMLStyleElement): this {\n        let $styles: HTMLStyleElement;\n        if (typeof styles === \"string\") {\n            $styles = document.createElement(\"style\");\n            $styles.textContent = styles;\n        } else {\n            $styles = styles;\n        }\n        this.set$userStyles($styles);\n        return this;\n    }\n\n    public unmountStyles(): this {\n        this.set$userStyles(undefined);\n        return this;\n    }\n\n    /** DOM of the box */\n    public $box: HTMLElement;\n\n    /** DOM of the box content */\n    public $content!: HTMLElement;\n\n    /** DOM of the box title bar */\n    public $titleBar!: HTMLElement;\n\n    /** DOM of the box footer */\n    public $footer!: HTMLElement;\n\n    protected _renderSideEffect = new SideEffectManager();\n\n    public render(root?: HTMLElement): HTMLElement {\n        if (root) {\n            if (root === this.$box) {\n                return this.$box;\n            } else {\n                this.$box = root;\n            }\n        } else {\n            if (this.$box) {\n                return this.$box;\n            } else {\n                this.$box = document.createElement(\"div\");\n            }\n        }\n\n        this._renderSideEffect.flushAll();\n\n        this.$box.classList.add(this.wrapClassName(\"box\"));\n\n        const bindClassName = <TValue>(\n            el: Element,\n            val: Val<TValue, boolean>,\n            className: string,\n            predicate: (value: TValue) => boolean = isTruthy\n        ): string => {\n            return this._renderSideEffect.add(() => {\n                const wrappedClassName = this.wrapClassName(className);\n                return val.subscribe((value) => {\n                    el.classList.toggle(wrappedClassName, predicate(value));\n                });\n            });\n        };\n\n        bindClassName(this.$box, this._readonly$, \"readonly\");\n        bindClassName(this.$box, this._draggable$, \"no-drag\", isFalsy);\n        bindClassName(this.$box, this._resizable$, \"no-resize\", isFalsy);\n        bindClassName(this.$box, this._focus$, \"blur\", isFalsy);\n        bindClassName(this.$box, this._darkMode$, \"color-scheme-dark\");\n        bindClassName(\n            this.$box,\n            this._darkMode$,\n            \"color-scheme-light\",\n            isFalsy\n        );\n\n        this._renderSideEffect.add(() => {\n            const minimizedClassName = this.wrapClassName(\"minimized\");\n            const maximizedClassName = this.wrapClassName(\"maximized\");\n            const MAXIMIZED_TIMER_ID = \"box-maximized-timer\";\n\n            return this._state$.subscribe((state) => {\n                this.$box.classList.toggle(\n                    minimizedClassName,\n                    state === TELE_BOX_STATE.Minimized\n                );\n\n                if (state === TELE_BOX_STATE.Maximized) {\n                    this._renderSideEffect.flush(MAXIMIZED_TIMER_ID);\n                    this.$box.classList.toggle(maximizedClassName, true);\n                } else {\n                    // delay so that transition won't be triggered\n                    this._renderSideEffect.setTimeout(\n                        () => {\n                            this.$box.classList.toggle(\n                                maximizedClassName,\n                                false\n                            );\n                        },\n                        0,\n                        MAXIMIZED_TIMER_ID\n                    );\n                }\n            });\n        });\n\n        this._renderSideEffect.add(() =>\n            this._visible$.subscribe((visible) => {\n                this.$box.style.display = visible ? \"block\" : \"none\";\n            })\n        );\n\n        this._renderSideEffect.add(() =>\n            this._zIndex$.subscribe((zIndex) => {\n                this.$box.style.zIndex = String(zIndex);\n            })\n        );\n\n        const boxStyler = styler(this.$box);\n\n        this.$box.dataset.teleBoxID = this.id;\n\n        this.$box.style.width = this.absoluteWidth + \"px\";\n        this.$box.style.height = this.absoluteHeight + \"px\";\n        // Add 10px offset on first frame\n        // which creates a subtle moving effect\n        const translateX =\n            this.x * this.containerRect.width + this.containerRect.x;\n        const translateY =\n            this.y * this.containerRect.height + this.containerRect.y;\n        this.$box.style.transform = `translate(${translateX - 10}px,${\n            translateY - 10\n        }px)`;\n\n        this._valSideEffectBinder\n            .combine(\n                [\n                    this._coord$,\n                    this._size$,\n                    this._minimized$,\n                    this._containerRect$,\n                    this._collectorRect$,\n                ],\n                ([coord, size, minimized, containerRect, collectorRect]) => {\n                    const absoluteWidth = size.width * containerRect.width;\n                    const absoluteHeight = size.height * containerRect.height;\n                    return {\n                        width:\n                            absoluteWidth +\n                            (minimized && collectorRect ? 1 : 0),\n                        height:\n                            absoluteHeight +\n                            (minimized && collectorRect ? 1 : 0),\n                        x: coord.x * containerRect.width,\n                        y: coord.y * containerRect.height,\n                        scaleX:\n                            minimized && collectorRect\n                                ? collectorRect.width / absoluteWidth\n                                : 1,\n                        scaleY:\n                            minimized && collectorRect\n                                ? collectorRect.height / absoluteHeight\n                                : 1,\n                    };\n                },\n                shallowequal\n            )\n            .subscribe((styles) => {\n                boxStyler.set(styles);\n            });\n\n        boxStyler.set({ x: translateX, y: translateY });\n\n        const $boxMain = document.createElement(\"div\");\n        $boxMain.className = this.wrapClassName(\"box-main\");\n        this.$box.appendChild($boxMain);\n\n        const $titleBar = document.createElement(\"div\");\n        $titleBar.className = this.wrapClassName(\"titlebar-wrap\");\n        $titleBar.appendChild(this.titleBar.render());\n        this.$titleBar = $titleBar;\n\n        const $contentWrap = document.createElement(\"div\");\n        $contentWrap.className = this.wrapClassName(\"content-wrap\");\n\n        const $content = document.createElement(\"div\");\n        $content.className =\n            this.wrapClassName(\"content\") + \" tele-fancy-scrollbar\";\n        this.$content = $content;\n\n        this._renderSideEffect.add(() => {\n            let last$userStyles: HTMLStyleElement | undefined;\n            return this._$userStyles$.subscribe(($userStyles) => {\n                if (last$userStyles) {\n                    last$userStyles.remove();\n                }\n                last$userStyles = $userStyles;\n                if ($userStyles) {\n                    $contentWrap.appendChild($userStyles);\n                }\n            });\n        });\n\n        this._renderSideEffect.add(() => {\n            let last$userContent: HTMLElement | undefined;\n            return this._$userContent$.subscribe(($userContent) => {\n                if (last$userContent) {\n                    last$userContent.remove();\n                }\n                last$userContent = $userContent;\n                if ($userContent) {\n                    $content.appendChild($userContent);\n                }\n            });\n        });\n\n        $contentWrap.appendChild($content);\n\n        const $footer = document.createElement(\"div\");\n        $footer.className = this.wrapClassName(\"footer-wrap\");\n        this.$footer = $footer;\n\n        this._renderSideEffect.add(() => {\n            let last$userFooter: HTMLElement | undefined;\n            return this._$userFooter$.subscribe(($userFooter) => {\n                if (last$userFooter) {\n                    last$userFooter.remove();\n                }\n                last$userFooter = $userFooter;\n                if ($userFooter) {\n                    $footer.appendChild($userFooter);\n                }\n            });\n        });\n\n        $boxMain.appendChild($titleBar);\n        $boxMain.appendChild($contentWrap);\n        $boxMain.appendChild($footer);\n\n        this._renderResizeHandlers();\n\n        return this.$box;\n    }\n\n    protected _handleTrackStart?: (ev: MouseEvent | TouchEvent) => void;\n\n    public handleTrackStart: (ev: MouseEvent | TouchEvent) => void = (ev) => {\n        return this._handleTrackStart?.(ev);\n    };\n\n    protected _renderResizeHandlers(): void {\n        const $resizeHandles = document.createElement(\"div\");\n        $resizeHandles.className = this.wrapClassName(\"resize-handles\");\n\n        Object.values(TELE_BOX_RESIZE_HANDLE).forEach((handleType) => {\n            const $handle = document.createElement(\"div\");\n            $handle.className =\n                this.wrapClassName(handleType) +\n                \" \" +\n                this.wrapClassName(\"resize-handle\");\n            $handle.dataset.teleBoxHandle = handleType;\n\n            $resizeHandles.appendChild($handle);\n        });\n\n        this.$box.appendChild($resizeHandles);\n\n        const TRACKING_DISPOSER_ID = \"handle-tracking-listener\";\n        const transformingClassName = this.wrapClassName(\"transforming\");\n\n        let $trackMask: HTMLElement | undefined;\n\n        let trackStartX = 0;\n        let trackStartY = 0;\n\n        let trackStartWidth = 0;\n        let trackStartHeight = 0;\n\n        let trackStartPageX = 0;\n        let trackStartPageY = 0;\n\n        let trackingHandle: TeleBoxHandleType | undefined;\n\n        const handleTracking = (ev: MouseEvent | TouchEvent): void => {\n            if (this.state !== TELE_BOX_STATE.Normal) {\n                return;\n            }\n\n            preventEvent(ev);\n\n            let { pageX, pageY } = flattenEvent(ev);\n            if (pageY < 0) {\n                pageY = 0;\n            }\n\n            const offsetX =\n                (pageX - trackStartPageX) / this.containerRect.width;\n            const offsetY =\n                (pageY - trackStartPageY) / this.containerRect.height;\n\n            switch (trackingHandle) {\n                case TELE_BOX_RESIZE_HANDLE.North: {\n                    this.transform(\n                        this.x,\n                        trackStartY + offsetY,\n                        this.width,\n                        trackStartHeight - offsetY\n                    );\n                    break;\n                }\n                case TELE_BOX_RESIZE_HANDLE.South: {\n                    this.transform(\n                        this.x,\n                        this.y,\n                        this.width,\n                        trackStartHeight + offsetY\n                    );\n                    break;\n                }\n                case TELE_BOX_RESIZE_HANDLE.West: {\n                    this.transform(\n                        trackStartX + offsetX,\n                        this.y,\n                        trackStartWidth - offsetX,\n                        this.height\n                    );\n                    break;\n                }\n                case TELE_BOX_RESIZE_HANDLE.East: {\n                    this.transform(\n                        this.x,\n                        this.y,\n                        trackStartWidth + offsetX,\n                        this.height\n                    );\n                    break;\n                }\n                case TELE_BOX_RESIZE_HANDLE.NorthWest: {\n                    this.transform(\n                        trackStartX + offsetX,\n                        trackStartY + offsetY,\n                        trackStartWidth - offsetX,\n                        trackStartHeight - offsetY\n                    );\n                    break;\n                }\n                case TELE_BOX_RESIZE_HANDLE.NorthEast: {\n                    this.transform(\n                        this.x,\n                        trackStartY + offsetY,\n                        trackStartWidth + offsetX,\n                        trackStartHeight - offsetY\n                    );\n                    break;\n                }\n                case TELE_BOX_RESIZE_HANDLE.SouthEast: {\n                    this.transform(\n                        this.x,\n                        this.y,\n                        trackStartWidth + offsetX,\n                        trackStartHeight + offsetY\n                    );\n                    break;\n                }\n                case TELE_BOX_RESIZE_HANDLE.SouthWest: {\n                    this.transform(\n                        trackStartX + offsetX,\n                        this.y,\n                        trackStartWidth - offsetX,\n                        trackStartHeight + offsetY\n                    );\n                    break;\n                }\n                default: {\n                    if (this.fence) {\n                        this.move(\n                            clamp(trackStartX + offsetX, 0, 1 - this.width),\n                            clamp(trackStartY + offsetY, 0, 1 - this.height)\n                        );\n                    } else {\n                        const xOverflowOffset = 20 / this.containerRect.width;\n                        const yOverflowOffset = 20 / this.containerRect.height;\n                        this.move(\n                            clamp(\n                                trackStartX + offsetX,\n                                xOverflowOffset - this.width,\n                                1 - xOverflowOffset\n                            ),\n                            clamp(trackStartY + offsetY, 0, 1 - yOverflowOffset)\n                        );\n                    }\n                    break;\n                }\n            }\n        };\n\n        const handleTrackEnd = (ev: MouseEvent | TouchEvent): void => {\n            trackingHandle = void 0;\n\n            if (!$trackMask) {\n                return;\n            }\n\n            preventEvent(ev);\n\n            this.$box.classList.toggle(transformingClassName, false);\n\n            this._sideEffect.flush(TRACKING_DISPOSER_ID);\n\n            $trackMask.remove();\n        };\n\n        const handleTrackStart = (ev: MouseEvent | TouchEvent): void => {\n            if (this.readonly) {\n                return;\n            }\n\n            if (\n                (ev as MouseEvent).button != null &&\n                (ev as MouseEvent).button !== 0\n            ) {\n                // Not left mouse\n                return;\n            }\n\n            if (\n                !this.draggable ||\n                trackingHandle ||\n                this.state !== TELE_BOX_STATE.Normal\n            ) {\n                return;\n            }\n\n            const target = ev.target as HTMLElement;\n            if (target.dataset?.teleBoxHandle) {\n                preventEvent(ev);\n\n                trackStartX = this.x;\n                trackStartY = this.y;\n                trackStartWidth = this.width;\n                trackStartHeight = this.height;\n\n                ({ pageX: trackStartPageX, pageY: trackStartPageY } =\n                    flattenEvent(ev));\n\n                trackingHandle = target.dataset\n                    .teleBoxHandle as TELE_BOX_RESIZE_HANDLE;\n\n                if (!$trackMask) {\n                    $trackMask = document.createElement(\"div\");\n                }\n\n                const cursor = trackingHandle\n                    ? this.wrapClassName(`cursor-${trackingHandle}`)\n                    : \"\";\n\n                $trackMask.className = this.wrapClassName(\n                    `track-mask${cursor ? ` ${cursor}` : \"\"}`\n                );\n\n                this.$box.appendChild($trackMask);\n\n                this.$box.classList.add(transformingClassName);\n\n                this._sideEffect.add(() => {\n                    window.addEventListener(\"mousemove\", handleTracking);\n                    window.addEventListener(\"touchmove\", handleTracking, {\n                        passive: false,\n                    });\n                    window.addEventListener(\"mouseup\", handleTrackEnd);\n                    window.addEventListener(\"touchend\", handleTrackEnd, {\n                        passive: false,\n                    });\n                    window.addEventListener(\"touchcancel\", handleTrackEnd, {\n                        passive: false,\n                    });\n\n                    return () => {\n                        window.removeEventListener(\"mousemove\", handleTracking);\n                        window.removeEventListener(\"touchmove\", handleTracking);\n                        window.removeEventListener(\"mouseup\", handleTrackEnd);\n                        window.removeEventListener(\"touchend\", handleTrackEnd);\n                        window.removeEventListener(\n                            \"touchcancel\",\n                            handleTrackEnd\n                        );\n                    };\n                }, TRACKING_DISPOSER_ID);\n            }\n        };\n\n        this._handleTrackStart = handleTrackStart;\n\n        this._sideEffect.addEventListener(\n            $resizeHandles,\n            \"mousedown\",\n            handleTrackStart,\n            {},\n            \"box-resizeHandles-mousedown\"\n        );\n\n        this._sideEffect.addEventListener(\n            $resizeHandles,\n            \"touchstart\",\n            handleTrackStart,\n            { passive: false },\n            \"box-resizeHandles-touchstart\"\n        );\n    }\n\n    public destroy(): void {\n        this.$box.remove();\n        this.events.emit(TELE_BOX_EVENT.Destroyed);\n\n        this._sideEffect.flushAll();\n        this._renderSideEffect.flushAll();\n        this.events.removeAllListeners();\n        this._delegateEvents.removeAllListeners();\n    }\n\n    /**\n     * Wrap a className with namespace\n     */\n    public wrapClassName(className: string): string {\n        return `${this.namespace}-${className}`;\n    }\n}\n\nfunction noop(): void {\n    return;\n}\n\ntype PropKeys<K = keyof TeleBox> = K extends keyof TeleBox\n    ? TeleBox[K] extends AnyToVoidFunction\n        ? never\n        : K\n    : never;\n\nexport type ReadonlyTeleBox = Pick<\n    TeleBox,\n    | PropKeys\n    | \"wrapClassName\"\n    | \"mountContent\"\n    | \"mountFooter\"\n    | \"mountStyles\"\n    | \"handleTrackStart\"\n>;\n","export default \"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjgiIGhlaWdodD0iMjgiIHZpZXdCb3g9IjAgMCAyOCAyOCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzFfNDQyNDQpIj4KPGcgZmlsdGVyPSJ1cmwoI2ZpbHRlcjBfZF8xXzQ0MjQ0KSI+CjxwYXRoIGQ9Ik0xNC4wMDAyIDE2LjE5NTNDMTMuODI0NyAxNi4xOTUzIDEzLjY1MjIgMTYuMTQ5MSAxMy41MDAyIDE2LjA2MTVMNC41MDAxNyAxMC44NjQzQzQuMDIxNzggMTAuNTg3OSAzLjg1Nzk2IDkuOTc2MTIgNC4xMzQyOCA5LjQ5NzczQzQuMjIyMDQgOS4zNDU3OSA0LjM0ODIzIDkuMjE5NiA0LjUwMDE3IDkuMTMxODRMMTMuNTAwMiAzLjkzODQ4QzEzLjgwOTggMy43NjA3NCAxNC4xOTA1IDMuNzYwNzQgMTQuNTAwMiAzLjkzODQ4TDIzLjUwMDIgOS4xMzE4NEMyMy45Nzg2IDkuNDA4MTYgMjQuMTQyNCAxMC4wMiAyMy44NjYxIDEwLjQ5ODRDMjMuNzc4MyAxMC42NTAzIDIzLjY1MjEgMTAuNzc2NSAyMy41MDAyIDEwLjg2NDNMMTQuNTAwMiAxNi4wNjE1QzE0LjM0ODEgMTYuMTQ5MSAxNC4xNzU3IDE2LjE5NTMgMTQuMDAwMiAxNi4xOTUzWiIgZmlsbD0id2hpdGUiLz4KPC9nPgo8ZyBmaWx0ZXI9InVybCgjZmlsdGVyMV9kXzFfNDQyNDQpIj4KPHBhdGggZD0iTTIzLjUwMDIgMTMuMTMxOUwyMS41MzYxIDExLjk5ODVMMTQuNTAwMiAxNi4wNjE2QzE0LjE5MDcgMTYuMjQgMTMuODA5NiAxNi4yNCAxMy41MDAyIDE2LjA2MTZMNi40NjQyOCAxMS45OTg1TDQuNTAwMTcgMTMuMTMxOUM0LjAyMTc4IDEzLjQwODIgMy44NTc5NiAxNC4wMiA0LjEzNDI4IDE0LjQ5ODRDNC4yMjIwNCAxNC42NTA0IDQuMzQ4MjMgMTQuNzc2NiA0LjUwMDE3IDE0Ljg2NDNMMTMuNTAwMiAyMC4wNjE2QzEzLjgwOTYgMjAuMjQgMTQuMTkwNyAyMC4yNCAxNC41MDAyIDIwLjA2MTZMMjMuNTAwMiAxNC44NjQzQzIzLjk3ODYgMTQuNTg4IDI0LjE0MjQgMTMuOTc2MiAyMy44NjYxIDEzLjQ5NzhDMjMuNzc4MyAxMy4zNDU5IDIzLjY1MjEgMTMuMjE5NyAyMy41MDAyIDEzLjEzMTlaIiBmaWxsPSJ3aGl0ZSIgZmlsbC1vcGFjaXR5PSIwLjgiIHNoYXBlLXJlbmRlcmluZz0iY3Jpc3BFZGdlcyIvPgo8L2c+CjxnIGZpbHRlcj0idXJsKCNmaWx0ZXIyX2RfMV80NDI0NCkiPgo8cGF0aCBkPSJNMjMuNTAwMiAxNy4xMzE5TDIxLjUzNjEgMTUuOTk4NUwxNC41MDAyIDIwLjA2MTZDMTQuMTkwNyAyMC4yNCAxMy44MDk2IDIwLjI0IDEzLjUwMDIgMjAuMDYxNkw2LjQ2NDI4IDE1Ljk5ODVMNC41MDAxNyAxNy4xMzE5QzQuMDIxNzggMTcuNDA4MiAzLjg1Nzk2IDE4LjAyIDQuMTM0MjggMTguNDk4NEM0LjIyMjA0IDE4LjY1MDQgNC4zNDgyMyAxOC43NzY2IDQuNTAwMTcgMTguODY0M0wxMy41MDAyIDI0LjA2MTZDMTMuODA5NiAyNC4yNCAxNC4xOTA3IDI0LjI0IDE0LjUwMDIgMjQuMDYxNkwyMy41MDAyIDE4Ljg2NDNDMjMuOTc4NiAxOC41ODggMjQuMTQyNCAxNy45NzYyIDIzLjg2NjEgMTcuNDk3OEMyMy43NzgzIDE3LjM0NTkgMjMuNjUyMSAxNy4yMTk3IDIzLjUwMDIgMTcuMTMxOVoiIGZpbGw9IndoaXRlIiBmaWxsLW9wYWNpdHk9IjAuNiIgc2hhcGUtcmVuZGVyaW5nPSJjcmlzcEVkZ2VzIi8+CjwvZz4KPC9nPgo8ZGVmcz4KPGZpbHRlciBpZD0iZmlsdGVyMF9kXzFfNDQyNDQiIHg9IjMiIHk9IjMuODA1MTgiIHdpZHRoPSIyMiIgaGVpZ2h0PSIxNC4zOTAxIiBmaWx0ZXJVbml0cz0idXNlclNwYWNlT25Vc2UiIGNvbG9yLWludGVycG9sYXRpb24tZmlsdGVycz0ic1JHQiI+CjxmZUZsb29kIGZsb29kLW9wYWNpdHk9IjAiIHJlc3VsdD0iQmFja2dyb3VuZEltYWdlRml4Ii8+CjxmZUNvbG9yTWF0cml4IGluPSJTb3VyY2VBbHBoYSIgdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDEyNyAwIiByZXN1bHQ9ImhhcmRBbHBoYSIvPgo8ZmVPZmZzZXQgZHk9IjEiLz4KPGZlR2F1c3NpYW5CbHVyIHN0ZERldmlhdGlvbj0iMC41Ii8+CjxmZUNvbXBvc2l0ZSBpbjI9ImhhcmRBbHBoYSIgb3BlcmF0b3I9Im91dCIvPgo8ZmVDb2xvck1hdHJpeCB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwLjU1Mjk0MSAwIDAgMCAwIDAuNTYwNzg0IDAgMCAwIDAgMC42NTA5OCAwIDAgMCAwLjE1IDAiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbjI9IkJhY2tncm91bmRJbWFnZUZpeCIgcmVzdWx0PSJlZmZlY3QxX2Ryb3BTaGFkb3dfMV80NDI0NCIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluPSJTb3VyY2VHcmFwaGljIiBpbjI9ImVmZmVjdDFfZHJvcFNoYWRvd18xXzQ0MjQ0IiByZXN1bHQ9InNoYXBlIi8+CjwvZmlsdGVyPgo8ZmlsdGVyIGlkPSJmaWx0ZXIxX2RfMV80NDI0NCIgeD0iMyIgeT0iMTEuOTk4NSIgd2lkdGg9IjIyIiBoZWlnaHQ9IjEwLjE5NjgiIGZpbHRlclVuaXRzPSJ1c2VyU3BhY2VPblVzZSIgY29sb3ItaW50ZXJwb2xhdGlvbi1maWx0ZXJzPSJzUkdCIj4KPGZlRmxvb2QgZmxvb2Qtb3BhY2l0eT0iMCIgcmVzdWx0PSJCYWNrZ3JvdW5kSW1hZ2VGaXgiLz4KPGZlQ29sb3JNYXRyaXggaW49IlNvdXJjZUFscGhhIiB0eXBlPSJtYXRyaXgiIHZhbHVlcz0iMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMTI3IDAiIHJlc3VsdD0iaGFyZEFscGhhIi8+CjxmZU9mZnNldCBkeT0iMSIvPgo8ZmVHYXVzc2lhbkJsdXIgc3RkRGV2aWF0aW9uPSIwLjUiLz4KPGZlQ29tcG9zaXRlIGluMj0iaGFyZEFscGhhIiBvcGVyYXRvcj0ib3V0Ii8+CjxmZUNvbG9yTWF0cml4IHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAuNTUyOTQxIDAgMCAwIDAgMC41NjA3ODQgMCAwIDAgMCAwLjY1MDk4IDAgMCAwIDAuMTUgMCIvPgo8ZmVCbGVuZCBtb2RlPSJub3JtYWwiIGluMj0iQmFja2dyb3VuZEltYWdlRml4IiByZXN1bHQ9ImVmZmVjdDFfZHJvcFNoYWRvd18xXzQ0MjQ0Ii8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW49IlNvdXJjZUdyYXBoaWMiIGluMj0iZWZmZWN0MV9kcm9wU2hhZG93XzFfNDQyNDQiIHJlc3VsdD0ic2hhcGUiLz4KPC9maWx0ZXI+CjxmaWx0ZXIgaWQ9ImZpbHRlcjJfZF8xXzQ0MjQ0IiB4PSIzIiB5PSIxNS45OTg1IiB3aWR0aD0iMjIiIGhlaWdodD0iMTAuMTk2OCIgZmlsdGVyVW5pdHM9InVzZXJTcGFjZU9uVXNlIiBjb2xvci1pbnRlcnBvbGF0aW9uLWZpbHRlcnM9InNSR0IiPgo8ZmVGbG9vZCBmbG9vZC1vcGFjaXR5PSIwIiByZXN1bHQ9IkJhY2tncm91bmRJbWFnZUZpeCIvPgo8ZmVDb2xvck1hdHJpeCBpbj0iU291cmNlQWxwaGEiIHR5cGU9Im1hdHJpeCIgdmFsdWVzPSIwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAwIDAgMCAxMjcgMCIgcmVzdWx0PSJoYXJkQWxwaGEiLz4KPGZlT2Zmc2V0IGR5PSIxIi8+CjxmZUdhdXNzaWFuQmx1ciBzdGREZXZpYXRpb249IjAuNSIvPgo8ZmVDb21wb3NpdGUgaW4yPSJoYXJkQWxwaGEiIG9wZXJhdG9yPSJvdXQiLz4KPGZlQ29sb3JNYXRyaXggdHlwZT0ibWF0cml4IiB2YWx1ZXM9IjAgMCAwIDAgMC41NTI5NDEgMCAwIDAgMCAwLjU2MDc4NCAwIDAgMCAwIDAuNjUwOTggMCAwIDAgMC4xNSAwIi8+CjxmZUJsZW5kIG1vZGU9Im5vcm1hbCIgaW4yPSJCYWNrZ3JvdW5kSW1hZ2VGaXgiIHJlc3VsdD0iZWZmZWN0MV9kcm9wU2hhZG93XzFfNDQyNDQiLz4KPGZlQmxlbmQgbW9kZT0ibm9ybWFsIiBpbj0iU291cmNlR3JhcGhpYyIgaW4yPSJlZmZlY3QxX2Ryb3BTaGFkb3dfMV80NDI0NCIgcmVzdWx0PSJzaGFwZSIvPgo8L2ZpbHRlcj4KPGNsaXBQYXRoIGlkPSJjbGlwMF8xXzQ0MjQ0Ij4KPHJlY3Qgd2lkdGg9IjI4IiBoZWlnaHQ9IjI4IiBmaWxsPSJ3aGl0ZSIvPgo8L2NsaXBQYXRoPgo8L2RlZnM+Cjwvc3ZnPgo=\"","export type AnyToVoidFunction = (...args: any[]) => void\nexport type NoneToVoidFunction = () => void\n\nexport type Scheduler = typeof requestAnimationFrame | typeof onTickEnd\n\nlet fastRafCallbacks: NoneToVoidFunction[] | undefined\nlet fastRafPrimaryCallbacks: NoneToVoidFunction[] | undefined\n\n// May result in an immediate execution if called from another `requestAnimationFrame` callback\nexport function fastRaf(callback: NoneToVoidFunction, isPrimary = false): void {\n  if (!fastRafCallbacks) {\n    fastRafCallbacks = isPrimary ? [] : [callback]\n    fastRafPrimaryCallbacks = isPrimary ? [callback] : []\n\n    requestAnimationFrame(() => {\n      const currentCallbacks = fastRafCallbacks\n      const currentPrimaryCallbacks = fastRafPrimaryCallbacks\n      fastRafCallbacks = undefined\n      fastRafPrimaryCallbacks = undefined\n      currentPrimaryCallbacks?.forEach((cb) => cb())\n      currentCallbacks?.forEach((cb) => cb())\n    })\n  } else if (isPrimary) {\n    fastRafPrimaryCallbacks?.push(callback)\n  } else {\n    fastRafCallbacks.push(callback)\n  }\n}\n\nexport function fastRafPrimary(callback: NoneToVoidFunction): void {\n  fastRaf(callback, true)\n}\n\nlet onTickEndCallbacks: NoneToVoidFunction[] | undefined\nlet onTickEndPrimaryCallbacks: NoneToVoidFunction[] | undefined\n\nexport function onTickEnd(callback: NoneToVoidFunction, isPrimary = false): void {\n  if (!onTickEndCallbacks) {\n    onTickEndCallbacks = isPrimary ? [] : [callback]\n    onTickEndPrimaryCallbacks = isPrimary ? [callback] : []\n\n    Promise.resolve().then(() => {\n      const currentCallbacks = onTickEndCallbacks\n      const currentPrimaryCallbacks = onTickEndPrimaryCallbacks\n      onTickEndCallbacks = undefined\n      onTickEndPrimaryCallbacks = undefined\n      currentPrimaryCallbacks?.forEach((cb) => cb())\n      currentCallbacks?.forEach((cb) => cb())\n    })\n  } else if (isPrimary) {\n    onTickEndPrimaryCallbacks?.push(callback)\n  } else {\n    onTickEndCallbacks.push(callback)\n  }\n}\n\nexport function onTickEndPrimary(callback: NoneToVoidFunction): void {\n  onTickEnd(callback, true)\n}\n","export function getHiddenElementSize(element: HTMLElement): {height: number; width: number}{\n    const clone = element.cloneNode(true) as HTMLElement;\n\n    clone.style.position = \"absolute\";\n    clone.style.top = \"-99999px\";\n    clone.style.float = \"none\";\n    clone.style.visibility = \"hidden\";\n    clone.style.display = \"block\";\n\n    document.body.appendChild(clone);\n\n    const rect = clone.getBoundingClientRect();\n\n    document.body.removeChild(clone);\n\n    return {height: rect.height, width: rect.width}\n}\n","import './style.scss'\nimport collectorSVG from './icons/collector.svg'\nimport type { TeleStyles } from '../typings'\nimport type { TeleBox } from '../TeleBox'\nimport { createSideEffectBinder } from 'value-enhancer'\nimport type { Val } from 'value-enhancer'\nimport { SideEffectManager } from 'side-effect-manager'\nimport { onTickEnd } from '../schedulers'\nimport { getHiddenElementSize } from './utils'\n\nexport interface TeleBoxCollectorConfig {\n    visible?: boolean\n    readonly?: boolean\n    darkMode?: boolean\n    namespace?: string\n    styles?: TeleStyles\n    onClick?: () => void\n    minimizedBoxes?: string[]\n    boxes?: TeleBox[]\n}\n\nexport class TeleBoxCollector {\n    public constructor({\n        visible = true,\n        readonly = false,\n        darkMode = false,\n        namespace = 'telebox',\n        styles = {},\n        onClick,\n        minimizedBoxes = [],\n        boxes = [],\n    }: TeleBoxCollectorConfig = {}) {\n        this._sideEffect = new SideEffectManager()\n        const { createVal } = createSideEffectBinder(this._sideEffect as any)\n        this._visible = visible\n        this._readonly = readonly\n        this._darkMode = darkMode\n        this.namespace = namespace\n        this.styles = styles\n        this.minimizedBoxes = minimizedBoxes\n        this.boxes = boxes\n        this.onClick = onClick\n\n        this.popupVisible$ = createVal(false)\n\n        this.popupVisible$.reaction((popupVisible) => {\n            this.$titles?.classList.toggle(\n                this.wrapClassName(\"collector-hide\"),\n                !popupVisible\n            );\n            requestAnimationFrame(() => {\n                requestAnimationFrame(() => {\n                    this.$titles?.classList.toggle(\n                        this.wrapClassName(\n                            \"collector-titles-visible\"\n                        ),\n                        popupVisible\n                    );\n                });\n            });\n        })\n\n        const blurPopup = (ev: PointerEvent): void => {\n            if (!this.popupVisible$) return\n\n            const target = ev.target as HTMLElement\n\n            if (target.className.includes('collector')) return\n\n            this.popupVisible$.setValue(false)\n        };\n        this._sideEffect.addEventListener(\n            window,\n            \"pointerdown\",\n            blurPopup,\n            true\n        );\n    }\n\n    public readonly styles: TeleStyles\n\n    public readonly namespace: string\n\n    public get visible(): boolean {\n        return this._visible\n    }\n\n    public get readonly(): boolean {\n        return this._readonly\n    }\n\n    public get darkMode(): boolean {\n        return this._darkMode\n    }\n\n    public onClick: ((boxId: string) => void) | undefined\n\n    public $collector: HTMLElement | undefined\n    private wrp$: HTMLElement | undefined\n    private count$: HTMLElement | undefined\n    private $titles: HTMLElement | undefined\n    protected root: HTMLElement | undefined\n\n    /**\n     * Mount collector to a root element.\n     */\n    public mount(root: HTMLElement): this {\n        this.render(root)\n        this.root = root\n        return this\n    }\n\n    /**\n     * Unmount collector from the root element.\n     */\n    public unmount(): this {\n        if (this.$collector) {\n            this.$collector.remove()\n        }\n        return this\n    }\n\n    public setVisible(visible: boolean): this {\n        if (this._visible !== visible) {\n            this._visible = visible\n            if (this.$collector) {\n                this.$collector.classList.toggle(this.wrapClassName('collector-visible'), visible)\n                this.wrp$?.classList.toggle(this.wrapClassName('collector-visible'), visible)\n                if (!visible) {\n                    this.popupVisible$.setValue(false)\n                } else {\n                    this.renderTitles()\n                }\n            }\n        }\n        return this\n    }\n\n    public setReadonly(readonly: boolean): this {\n        if (this._readonly !== readonly) {\n            this._readonly = readonly\n            if (this.$collector) {\n                this.$collector.classList.toggle(this.wrapClassName('collector-readonly'), readonly)\n            }\n        }\n        return this\n    }\n\n    public setDarkMode(darkMode: boolean): this {\n        if (this._darkMode !== darkMode) {\n            this._darkMode = darkMode\n            if (this.$collector) {\n                this.$collector.classList.toggle(this.wrapClassName('color-scheme-dark'), darkMode)\n                this.$collector.classList.toggle(\n                    this.wrapClassName('color-scheme-light'),\n                    !darkMode\n                )\n            }\n        }\n        return this\n    }\n\n    public setStyles(styles: TeleStyles): this {\n        Object.assign(this.styles, styles)\n        if (this.wrp$) {\n            const $collector = this.wrp$\n            Object.keys(styles).forEach((key) => {\n                const value = styles[key as keyof TeleStyles] as string\n                if (value != null) {\n                    $collector.style[key as keyof TeleStyles] = value\n                }\n            })\n        }\n        return this\n    }\n\n    public setMinimizedBoxes(boxes: string[]): void {\n        this.minimizedBoxes = boxes\n        if (this.count$) {\n            this.count$.textContent = String(this.minimizedBoxes?.length) || '0'\n        }\n\n        this.renderTitles()\n    }\n\n    public setBoxes (boxes: TeleBox[]):void {\n        this.boxes = boxes\n        this.renderTitles()\n    }\n\n    public render(root: HTMLElement): HTMLElement {\n        if (!this.$collector) {\n            this.$collector = document.createElement('button')\n            this.$collector.className = this.wrapClassName('collector')\n            this.$collector.style.backgroundImage = `url('${collectorSVG}')`\n            this.wrp$ = document.createElement('div')\n            this.count$ = document.createElement('div')\n\n            this.wrp$.className = this.wrapClassName('collector-wrp')\n            this.count$.className = this.wrapClassName('collector-count')\n\n            this.wrp$.appendChild(this.count$)\n            this.wrp$.appendChild(this.$collector)\n\n            this.$collector.addEventListener('click', this.handleCollectorClick)\n\n            if (this._visible) {\n                this.$collector.classList.add(this.wrapClassName('collector-visible'))\n                this.wrp$.classList.toggle(this.wrapClassName('collector-visible'))\n\n                this.renderTitles();\n            }\n\n            if (this._readonly) {\n                this.$collector.classList.add(this.wrapClassName('collector-readonly'))\n            }\n\n            this.$collector.classList.add(\n                this.wrapClassName(this._darkMode ? 'color-scheme-dark' : 'color-scheme-light')\n            )\n\n            this.setStyles(this.styles)\n            root.appendChild(this.wrp$)\n        }\n\n        return this.$collector\n    }\n\n    protected renderTitles(): HTMLElement {\n        if (!this.$titles) {\n            this.$titles = document.createElement('div')\n            this.$titles.className = this.wrapClassName('collector-titles')\n\n            this.$titles.classList.toggle(\n                this.wrapClassName('collector-hide'),\n                !this.popupVisible$.value\n            )\n        }\n\n        this._sideEffect.addEventListener(\n            this.$titles,\n            'wheel',\n            (ev) => {\n                if (!ev.deltaX) {\n                    (ev.currentTarget as HTMLElement).scrollBy({\n                        left: ev.deltaY > 0 ? 250 : -250,\n                        behavior: 'smooth'\n                    })\n                }\n            },\n            { passive: false },\n            'min-popup-render-wheel-titles'\n        )\n\n        const existContent: HTMLDivElement = this.$titles.querySelector(\n            `.${this.wrapClassName('collector-titles-content')}`\n        ) as HTMLDivElement\n        const $content: HTMLDivElement = existContent ?? document.createElement('div')\n        $content.className = this.wrapClassName('collector-titles-content')\n        if (!existContent) {\n            this.$titles.appendChild($content)\n\n            this._sideEffect.addEventListener(\n                $content,\n                'click',\n                (ev) => {\n                    const target = ev.target as HTMLElement\n                    if (target.dataset?.teleBoxID?.length) {\n                        this.onClick?.(target.dataset?.teleBoxID)\n                    }\n                },\n                {},\n                'telebox-collector-titles-content-click'\n            )\n        }\n\n        $content.innerHTML = ''\n\n        const disposers = this.boxes?.filter((box) => this.minimizedBoxes?.includes(box.id))\n            .map((box) => {\n                const $tab = document.createElement('button')\n                $tab.className = this.wrapClassName('collector-titles-tab')\n                $tab.textContent = box.title\n                $tab.dataset.teleBoxID = box.id\n                $tab.dataset.teleTitleBarNoDblClick = 'true'\n\n                $content.appendChild($tab)\n\n                return box._title$.reaction((title) => ($tab.textContent = title))\n            })\n\n        this._sideEffect.addDisposer(\n            () => disposers?.forEach((disposer) => disposer()),\n            'min-popup-render-tab-titles'\n        )\n\n        const existTitles = this.wrp$?.querySelector(\n            `.${this.wrapClassName('collector-titles')}`\n        )\n        if (!existTitles) {\n            this.wrp$?.appendChild(this.$titles)\n        } else {\n            this.wrp$?.replaceChild(this.$titles, existTitles)\n        }\n\n        onTickEnd(() => {\n            if (!this.$titles) return\n            if (!this.wrp$) return\n            if (!this.root) return\n\n            const parentRect = this.wrp$?.getBoundingClientRect()\n            const rootRect = this.root?.getBoundingClientRect()\n            const popupSize = getHiddenElementSize(this.$titles)\n\n            const isAvailableSpaceTop = parentRect.top - rootRect.top > popupSize.height\n            const isAvailableSpaceLeft =\n                parentRect.x - rootRect.x > popupSize.width / 2 - parentRect.width / 2\n\n            const topPosition = -popupSize.height - 10\n            let leftPosition = -(popupSize.width / 2 - parentRect.width / 2)\n            if (!isAvailableSpaceTop) {\n                const availableHeight = parentRect.top\n                this.$titles.style.height = `${availableHeight}px`\n            }\n\n            if (!isAvailableSpaceLeft) {\n                leftPosition = -(parentRect.x - rootRect.x - 4)\n            }\n\n            this.$titles.style.top = `${topPosition}px`\n            this.$titles.style.left = `${leftPosition}px`\n        })\n\n        return this.$titles\n    }\n\n    public destroy(): void {\n        if (this.$collector) {\n            this.$collector.removeEventListener('click', this.handleCollectorClick)\n            this.$collector.remove()\n            this.$collector = void 0\n        }\n        this.onClick = void 0\n    }\n\n    public wrapClassName(className: string): string {\n        return `${this.namespace}-${className}`\n    }\n\n    protected _visible: boolean\n\n    protected _readonly: boolean\n\n    protected _darkMode: boolean\n    protected minimizedBoxes: TeleBoxCollectorConfig['minimizedBoxes']\n    protected boxes: TeleBoxCollectorConfig['boxes']\n\n    protected handleCollectorClick = (): void => {\n        if (!this._readonly && this.onClick) {\n            this.popupVisible$.setValue(!this.popupVisible$.value)\n        }\n    }\n    protected _sideEffect: SideEffectManager\n    protected popupVisible$: Val<boolean>\n}\n","export enum TELE_BOX_MANAGER_EVENT {\n    Focused = \"focused\",\n    Blurred = \"blurred\",\n    Created = \"created\",\n    Removed = \"removed\",\n    State = \"state\",\n    Maximized = \"maximized\",\n    Minimized = \"minimized\",\n    Move = \"move\",\n    Resize = \"resize\",\n    IntrinsicMove = \"intrinsic_move\",\n    IntrinsicResize = \"intrinsic_resize\",\n    VisualResize = \"visual_resize\",\n    ZIndex = \"z_index\",\n    PrefersColorScheme = \"prefers_color_scheme\",\n    DarkMode = \"dark_mode\",\n}\n","import './style.scss'\n\nimport type { TeleBox } from '../../TeleBox'\nimport { DefaultTitleBar } from '../../TeleTitleBar'\nimport type { DefaultTitleBarConfig } from '../../TeleTitleBar'\nimport { TELE_BOX_STATE } from '../../TeleBox/constants'\nimport type { TeleBoxRect, TeleBoxState } from '../../TeleBox/typings'\n\nexport type MaxTitleBarTeleBox = Pick<TeleBox, 'id' | 'title' | 'readonly'>\n\nexport interface MaxTitleBarConfig extends DefaultTitleBarConfig {\n    darkMode: boolean\n    boxes: MaxTitleBarTeleBox[]\n    containerRect: TeleBoxRect\n    focusedBox?: MaxTitleBarTeleBox\n    maximizedBoxes$: string[]\n    minimizedBoxes$: string[]\n}\n\nexport class MaxTitleBar extends DefaultTitleBar {\n    public constructor(config: MaxTitleBarConfig) {\n        super(config)\n\n        this.boxes = config.boxes\n        this.focusedBox = config.focusedBox\n        this.containerRect = config.containerRect\n        this.darkMode = config.darkMode\n        this.maximizedBoxes$ = config.maximizedBoxes$\n        this.minimizedBoxes$ = config.minimizedBoxes$\n    }\n\n    public focusBox(box?: MaxTitleBarTeleBox): void {\n        if (this.focusedBox && this.focusedBox === box) {\n            return\n        }\n\n        if (this.$titles && this.state === TELE_BOX_STATE.Maximized) {\n            const { children } = this.$titles.firstElementChild as HTMLElement\n            for (let i = children.length - 1; i >= 0; i -= 1) {\n                const $tab = children[i] as HTMLElement\n                const id = $tab.dataset?.teleBoxID\n                if (id) {\n                    if (box && id === box.id) {\n                        $tab.classList.toggle(this.wrapClassName('titles-tab-focus'), true)\n                    } else if (this.focusedBox && id === this.focusedBox.id) {\n                        $tab.classList.toggle(this.wrapClassName('titles-tab-focus'), false)\n                    }\n                }\n            }\n        }\n        this.focusedBox = box\n    }\n\n    public setContainerRect(rect: TeleBoxRect): void {\n        this.containerRect = rect\n        if (this.$titleBar) {\n            const { x, y, width } = rect\n            this.$titleBar.style.transform = `translate(${x}px, ${y}px)`\n            this.$titleBar.style.width = width + 'px'\n        }\n    }\n\n    public setBoxes(boxes: MaxTitleBarTeleBox[]): void {\n        this.boxes = boxes\n        this.updateTitles()\n    }\n\n    public setMaximizedBoxes(boxes: string[]): void {\n        this.maximizedBoxes$ = boxes\n        this.updateTitles()\n    }\n    public setMinimizedBoxes(boxes: string[]): void {\n        this.minimizedBoxes$ = boxes\n        this.updateTitles()\n    }\n\n    public setState(state: TeleBoxState): void {\n        super.setState(state)\n        if (this.$titleBar) {\n            this.$titleBar.classList.toggle(\n                this.wrapClassName('max-titlebar-maximized'),\n                state === TELE_BOX_STATE.Maximized\n            )\n        }\n        this.updateTitles()\n    }\n\n    public setReadonly(readonly: boolean): void {\n        super.setReadonly(readonly)\n        if (this.$titleBar) {\n            this.$titleBar.classList.toggle(this.wrapClassName('readonly'), this.readonly)\n        }\n    }\n\n    public setDarkMode(darkMode: boolean): void {\n        if (darkMode !== this.darkMode) {\n            this.darkMode = darkMode\n            if (this.$titleBar) {\n                this.$titleBar.classList.toggle(this.wrapClassName('color-scheme-dark'), darkMode)\n                this.$titleBar.classList.toggle(this.wrapClassName('color-scheme-light'), !darkMode)\n            }\n        }\n    }\n\n    public render(): HTMLElement {\n        const $titleBar = super.render()\n\n        const { x, y, width } = this.containerRect\n        $titleBar.style.transform = `translate(${x}px, ${y}px)`\n        $titleBar.style.width = width + 'px'\n\n        $titleBar.classList.add(this.wrapClassName('max-titlebar'))\n        $titleBar.classList.toggle(\n            this.wrapClassName('max-titlebar-maximized'),\n            this.state === TELE_BOX_STATE.Maximized\n        )\n        $titleBar.classList.toggle(this.wrapClassName('readonly'), this.readonly)\n        $titleBar.classList.add(\n            this.wrapClassName(this.darkMode ? 'color-scheme-dark' : 'color-scheme-light')\n        )\n\n        const $titlesArea = document.createElement('div')\n        $titlesArea.classList.add(this.wrapClassName('titles-area'))\n        $titleBar.insertBefore($titlesArea, $titleBar.firstElementChild)\n\n        this.updateTitles()\n\n        return $titleBar\n    }\n\n    public destroy(): void {\n        super.destroy()\n        this.$titles = void 0\n        this.boxes.length = 0\n        this.focusedBox = void 0\n    }\n\n    public updateTitles(): void {\n        this.$titleBar?.classList.toggle(\n            this.wrapClassName('max-titlebar-active'),\n            this.maximizedBoxes$.length > 0 &&\n                this.boxes.length > 0 &&\n                this.maximizedBoxes$.filter((boxId) => !this.minimizedBoxes$.includes(boxId))\n                    .length > 0\n        )\n        if (\n            this.$titleBar &&\n            this.maximizedBoxes$.length > 0 &&\n            this.boxes.length > 0 &&\n            this.maximizedBoxes$.filter((boxId) => !this.minimizedBoxes$.includes(boxId)).length > 0\n        ) {\n            this.$titleBar.classList.toggle(\n                this.wrapClassName('max-titlebar-single-title'),\n                this.boxes.length === 1\n            )\n            if (this.boxes.length === 1) {\n                this.setTitle(this.boxes[0].title)\n            } else {\n                this.$titleBar.replaceChild(\n                    this.renderTitles(),\n                    this.$titleBar.firstElementChild as HTMLElement\n                )\n            }\n        }\n    }\n\n    protected renderTitles(): HTMLElement {\n        this.$titles = document.createElement('div')\n        this.$titles.className = this.wrapClassName('titles')\n        this.$titles.addEventListener(\n            'wheel',\n            (ev) => {\n                (ev.currentTarget as HTMLElement).scrollBy({\n                    left: ev.deltaY > 0 ? 250 : -250,\n                    behavior: 'smooth'\n                })\n            },\n            { passive: false }\n        )\n\n        const $content = document.createElement('div')\n        $content.className = this.wrapClassName('titles-content')\n        this.$titles.appendChild($content)\n\n        this.boxes\n            .filter((box) => this.maximizedBoxes$.includes(box.id))\n            .filter((box) => !this.minimizedBoxes$.includes(box.id))\n            .forEach((box) => {\n                const $tab = document.createElement('button')\n                $tab.className = this.wrapClassName('titles-tab')\n                $tab.textContent = box.title\n                $tab.dataset.teleBoxID = box.id\n                $tab.dataset.teleTitleBarNoDblClick = 'true'\n\n                if (this.focusedBox && box.id === this.focusedBox.id) {\n                    $tab.classList.add(this.wrapClassName('titles-tab-focus'))\n                }\n\n                $content.appendChild($tab)\n            })\n\n        return this.$titles\n    }\n\n    protected darkMode: boolean\n\n    protected $titles: HTMLElement | undefined\n\n    protected boxes: MaxTitleBarTeleBox[]\n\n    public focusedBox: MaxTitleBarTeleBox | undefined\n\n    protected containerRect: TeleBoxRect\n    protected maximizedBoxes$: MaxTitleBarConfig['maximizedBoxes$']\n    protected minimizedBoxes$: MaxTitleBarConfig['minimizedBoxes$']\n}\n","import EventEmitter from 'eventemitter3'\nimport shallowequal from 'shallowequal'\nimport type { TeleBoxConfig, TeleBoxRect, TeleBoxState } from '../TeleBox/typings'\nimport { TeleBoxCollector } from '../TeleBoxCollector'\nimport { ReadonlyTeleBox, TeleBox } from '../TeleBox'\nimport { TELE_BOX_EVENT, TELE_BOX_STATE } from '../TeleBox/constants'\nimport { TELE_BOX_MANAGER_EVENT } from './constants'\nimport type {\n    TeleBoxManagerConfig,\n    TeleBoxManagerCreateConfig,\n    TeleBoxManagerEvents,\n    TeleBoxManagerQueryConfig,\n    TeleBoxManagerUpdateConfig\n} from './typings'\nimport { MaxTitleBar } from './MaxTitleBar'\nimport {\n    TeleBoxColorScheme,\n    TELE_BOX_COLOR_SCHEME,\n    TELE_BOX_DELEGATE_EVENT\n} from '..'\nimport { genUID, SideEffectManager } from 'side-effect-manager'\nimport {\n    createSideEffectBinder,\n    Val,\n    ValEnhancedResult,\n    withValueEnhancer\n} from 'value-enhancer'\nimport { excludeFromBoth, removeByVal, uniqueByVal } from '../utils'\n\nexport * from './typings'\nexport * from './constants'\n\ntype ValConfig = {\n    prefersColorScheme: Val<TeleBoxColorScheme, boolean>\n    containerRect: Val<TeleBoxRect, boolean>\n    collector: Val<TeleBoxCollector | null>\n    collectorRect: Val<TeleBoxRect | undefined>\n    readonly: Val<boolean, boolean>\n    // minimized: Val<boolean, boolean>\n    // maximized: Val<boolean, boolean>\n    fence: Val<boolean, boolean>\n    minimizedBoxes: Val<string[]>\n    maximizedBoxes: Val<string[]>\n}\nexport interface TeleBoxManager extends ValEnhancedResult<ValConfig> {}\n\nexport class TeleBoxManager {\n    public constructor({\n        root = document.body,\n        prefersColorScheme = TELE_BOX_COLOR_SCHEME.Light,\n        // minimized = false,\n        // maximized = false,\n        fence = true,\n        containerRect = {\n            x: 0,\n            y: 0,\n            width: window.innerWidth,\n            height: window.innerHeight\n        },\n        collector,\n        namespace = 'telebox',\n        readonly = false,\n        minimizedBoxes = [],\n        maximizedBoxes = []\n    }: TeleBoxManagerConfig = {}) {\n        this._sideEffect = new SideEffectManager()\n        const { combine, createVal } = createSideEffectBinder(this._sideEffect as any)\n\n        this.root = root\n        this.namespace = namespace\n\n        this.boxes$ = createVal<TeleBox[]>([])\n        this.topBox$ = this.boxes$.derive((boxes) => {\n            if (boxes.length > 0) {\n                const topBox = boxes.reduce((topBox, box) =>\n                    topBox.zIndex > box.zIndex ? topBox : box\n                )\n                return topBox\n            }\n            return\n        })\n\n        const prefersDark = window.matchMedia('(prefers-color-scheme: dark)')\n        const prefersDark$ = createVal(false)\n\n        if (prefersDark) {\n            prefersDark$.setValue(prefersDark.matches)\n            this._sideEffect.add(() => {\n                const handler = (evt: MediaQueryListEvent): void => {\n                    prefersDark$.setValue(evt.matches)\n                }\n                prefersDark.addListener(handler)\n                return () => prefersDark.removeListener(handler)\n            })\n        }\n\n        const prefersColorScheme$ = createVal(prefersColorScheme)\n        prefersColorScheme$.reaction((prefersColorScheme, _, skipUpdate) => {\n            this.boxes.forEach((box) => box.setPrefersColorScheme(prefersColorScheme, skipUpdate))\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_MANAGER_EVENT.PrefersColorScheme, prefersColorScheme)\n            }\n        })\n\n        this._darkMode$ = combine(\n            [prefersDark$, prefersColorScheme$],\n            ([prefersDark, prefersColorScheme]) =>\n                prefersColorScheme === 'auto' ? prefersDark : prefersColorScheme === 'dark'\n        )\n        this._darkMode$.reaction((darkMode, _, skipUpdate) => {\n            this.boxes.forEach((box) => box.setDarkMode(darkMode, skipUpdate))\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_MANAGER_EVENT.DarkMode, darkMode)\n            }\n        })\n\n        const readonly$ = createVal(readonly)\n        readonly$.reaction((readonly, _, skipUpdate) => {\n            this.boxes.forEach((box) => box.setReadonly(readonly, skipUpdate))\n        })\n\n        this.maximizedBoxes$ = createVal(maximizedBoxes)\n        this.minimizedBoxes$ = createVal(minimizedBoxes)\n        this.maximizedBoxes$.reaction((maximizedBoxes, _, skipUpdate) => {\n            this.boxes.forEach((box) => box.setMaximized(maximizedBoxes.includes(box.id), skipUpdate))\n            const maxBoxes = maximizedBoxes.filter(id => !this.minimizedBoxes$.value.includes(id))\n            this.maxTitleBar.setState(maxBoxes.length > 0 ? TELE_BOX_STATE.Maximized : TELE_BOX_STATE.Normal)\n            this.maxTitleBar.setMaximizedBoxes(maximizedBoxes)\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_MANAGER_EVENT.Maximized, true)\n            }\n        })\n\n        const state$ = combine(\n            [this.minimizedBoxes$, this.maximizedBoxes$],\n            ([minimized, maximized]): TeleBoxState =>\n                minimized.length\n                    ? TELE_BOX_STATE.Minimized\n                    : maximized.length\n                    ? TELE_BOX_STATE.Maximized\n                    : TELE_BOX_STATE.Normal\n        )\n        state$.reaction((state, _, skipUpdate) => {\n            this.maxTitleBar.setState(state)\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_MANAGER_EVENT.State, state)\n            }\n        })\n\n        const fence$ = createVal(fence)\n        fence$.subscribe((fence, _, skipUpdate) => {\n            this.boxes.forEach((box) => box.setFence(fence, skipUpdate))\n        })\n\n        const containerRect$ = createVal(containerRect, shallowequal)\n        containerRect$.reaction((containerRect, _, skipUpdate) => {\n            this.boxes.forEach((box) => box.setContainerRect(containerRect, skipUpdate))\n            this.maxTitleBar.setContainerRect(containerRect)\n        })\n\n        const collector$ = createVal(\n            collector === null\n                ? null\n                : collector ||\n                      new TeleBoxCollector({\n                          visible: this.minimizedBoxes$.value.length > 0,\n                          readonly: readonly,\n                          namespace,\n                          minimizedBoxes: this.minimizedBoxes$.value,\n                          boxes: this.boxes$.value,\n                      }).mount(root)\n        )\n        collector$.subscribe((collector) => {\n            if (collector) {\n                collector.setVisible(this.minimizedBoxes$.value.length > 0)\n                collector.setReadonly(readonly$.value)\n                collector.setDarkMode(this._darkMode$.value)\n                this._sideEffect.add(() => {\n                    collector.onClick = (boxId) => {\n                        if (!readonly$.value) {\n                            this.setMinimizedBoxes(\n                                removeByVal(\n                                    this.minimizedBoxes$.value.filter(Boolean),\n                                    boxId\n                                ) as string[]\n                            )\n                        }\n                    }\n                    return () => collector.destroy()\n                }, 'collect-onClick')\n            }\n        })\n        readonly$.subscribe((readonly) => collector$.value?.setReadonly(readonly))\n        this._darkMode$.subscribe((darkMode) => {\n            collector$.value?.setDarkMode(darkMode)\n        })\n\n        const calcCollectorRect = (): TeleBoxRect | undefined => {\n            if (collector$.value?.$collector) {\n                const { x, y, width, height } = collector$.value.$collector.getBoundingClientRect()\n                const rootRect = this.root.getBoundingClientRect()\n                return {\n                    x: x - rootRect.x,\n                    y: y - rootRect.y,\n                    width,\n                    height\n                }\n            }\n            return\n        }\n\n        const collectorRect$ = createVal(this.minimizedBoxes$.value.length > 0 ? calcCollectorRect() : void 0)\n        collectorRect$.subscribe((collectorRect, _, skipUpdate) => {\n            this.boxes.forEach((box) => {\n                box.setCollectorRect(collectorRect, skipUpdate)\n            })\n        })\n\n        // minimized$.subscribe((minimized, _, skipUpdate) => {\n        //     collector$.value?.setVisible(minimized)\n\n        //     if (minimized) {\n        //         if (collector$.value?.$collector) {\n        //             collectorRect$.setValue(calcCollectorRect())\n        //         } else if (import.meta.env.DEV) {\n        //             console.warn('No collector for minimized boxes.')\n        //         }\n        //     }\n\n        //     this.boxes.forEach((box) => box.setMinimized(minimized, skipUpdate))\n\n        //     if (!skipUpdate) {\n        //         this.events.emit(TELE_BOX_MANAGER_EVENT.Minimized, minimized)\n        //     }\n        // })\n\n        this.minimizedBoxes$.reaction((minimizedBoxes, _, skipUpdate) => {\n            this.boxes.forEach((box) => box.setMinimized(minimizedBoxes.includes(box.id), skipUpdate))\n\n            const maxBoxes = this.maximizedBoxes$.value.filter(id => !minimizedBoxes.includes(id))\n            this.maxTitleBar.setState(maxBoxes.length > 0 ? TELE_BOX_STATE.Maximized : TELE_BOX_STATE.Normal)\n            this.maxTitleBar.setMinimizedBoxes(minimizedBoxes)\n\n            const minimized = minimizedBoxes.length > 0\n            collector$.value?.setVisible(minimized)\n            this.collector?.setMinimizedBoxes(minimizedBoxes)\n            if (minimized) {\n                if (collector$.value?.$collector) {\n                    collectorRect$.setValue(calcCollectorRect())\n                } else if (import.meta.env.DEV) {\n                    console.warn('No collector for minimized boxes.')\n                }\n            }\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_MANAGER_EVENT.Minimized, minimized)\n            }\n        })\n\n        const closeBtnClassName = this.wrapClassName('titlebar-icon-close')\n\n        const checkFocusBox = (ev: MouseEvent | TouchEvent): void => {\n            if (readonly$.value) {\n                return\n            }\n\n            const target = ev.target as HTMLElement\n            if (!target.tagName) {\n                return\n            }\n\n            for (let el: HTMLElement | null = target; el; el = el.parentElement) {\n                if (el.classList && el.classList.contains(closeBtnClassName)) {\n                    return\n                }\n                const id = el.dataset?.teleBoxID\n                if (id) {\n                    const box = this.getBox(id)\n                    if (box) {\n                        this.focusBox(box)\n                        this.makeBoxTop(box)\n                        return\n                    }\n                }\n            }\n        }\n\n        this._sideEffect.addEventListener(window, 'mousedown', checkFocusBox, true)\n        this._sideEffect.addEventListener(window, 'touchstart', checkFocusBox, true)\n\n        this.maxTitleBar = new MaxTitleBar({\n            darkMode: this.darkMode,\n            readonly: readonly$.value,\n            namespace: this.namespace,\n            state: state$.value,\n            boxes: this.boxes$.value,\n            containerRect: containerRect$.value,\n            maximizedBoxes$: this.maximizedBoxes$.value,\n            minimizedBoxes$: this.minimizedBoxes$.value,\n            onEvent: (event): void => {\n                switch (event.type) {\n                    case TELE_BOX_DELEGATE_EVENT.Maximize: {\n                        if (this.maxTitleBar.focusedBox?.id) {\n                            const oldFocusId = this.maxTitleBar.focusedBox?.id;\n                            const isInMaximizedBoxes =\n                                this._maximizedBoxes$.value.includes(\n                                    oldFocusId\n                                );\n                            const newMaximizedBoxes: string[] =\n                                isInMaximizedBoxes\n                                    ? removeByVal(\n                                          [...this._maximizedBoxes$.value],\n                                          oldFocusId\n                                      )\n                                    : uniqueByVal([\n                                          ...this._maximizedBoxes$.value,\n                                          this.maxTitleBar.focusedBox?.id,\n                                      ]);\n\n                            this.setMaximizedBoxes(newMaximizedBoxes);\n\n                            const hasTopBox = this.makeBoxTopFromMaximized();\n\n                            const oldFocusBox = this.boxes$.value.find(\n                                (box) => box.id == oldFocusId\n                            );\n                            if (oldFocusBox) {\n                                this.makeBoxTop(oldFocusBox);\n                            }\n                            if (!hasTopBox) {\n                                this.setMaximizedBoxes([]);\n                            }\n                        } else {\n                            this.setMaximizedBoxes([]);\n                        }\n                        break;\n                    }\n                    case TELE_BOX_DELEGATE_EVENT.Minimize: {\n                        if (this.maxTitleBar.focusedBox?.id) {\n                            const newMinimizedBoxes: string[] = uniqueByVal([\n                                ...this.minimizedBoxes$.value,\n                                this.maxTitleBar.focusedBox?.id,\n                            ]);\n\n                            this.makeBoxTopFromMaximized();\n\n                            this.setMinimizedBoxes(newMinimizedBoxes);\n                        }\n                        break\n                    }\n                    case TELE_BOX_EVENT.Close: {\n                        const focusedId = this.maxTitleBar.focusedBox?.id;\n                        if (focusedId) {\n                            this.remove(focusedId);\n                            this.makeBoxTopFromMaximized();\n                            this.setMaximizedBoxes(removeByVal(this.maximizedBoxes$.value, focusedId))\n                        }\n                        this.focusTopBox();\n                        break\n                    }\n                    default: {\n                        break\n                    }\n                }\n            }\n        })\n        readonly$.subscribe((readonly) => this.maxTitleBar.setReadonly(readonly))\n        this._darkMode$.subscribe((darkMode) => {\n            this.maxTitleBar.setDarkMode(darkMode)\n        })\n        this.boxes$.reaction((boxes) => {\n            this.maxTitleBar.setBoxes(boxes)\n            this.collector?.setBoxes(boxes)\n        })\n\n        this.maximizedBoxes$.reaction((boxes) => {\n            this.maxTitleBar.setMaximizedBoxes(boxes)\n        })\n\n        this.minimizedBoxes$.reaction((boxes) => {\n            this.maxTitleBar.setMinimizedBoxes(boxes)\n        })\n\n        const valConfig: ValConfig = {\n            prefersColorScheme: prefersColorScheme$,\n            containerRect: containerRect$,\n            collector: collector$,\n            collectorRect: collectorRect$,\n            readonly: readonly$,\n            fence: fence$,\n            maximizedBoxes: this.maximizedBoxes$,\n            minimizedBoxes: this.minimizedBoxes$\n        }\n\n        withValueEnhancer(this, valConfig)\n\n        this._state$ = state$\n\n        this.root.appendChild(this.maxTitleBar.render())\n    }\n\n    public get boxes(): ReadonlyArray<TeleBox> {\n        return this.boxes$.value\n    }\n\n    public get topBox(): TeleBox | undefined {\n        return this.topBox$.value\n    }\n\n    public readonly events = new EventEmitter() as TeleBoxManagerEvents\n\n    protected _sideEffect: SideEffectManager\n\n    protected root: HTMLElement\n\n    protected maximizedBoxes$: Val<string[]>\n    protected minimizedBoxes$: Val<string[]>\n\n    public readonly namespace: string\n\n    public _darkMode$: Val<boolean, boolean>\n\n    public get darkMode(): boolean {\n        return this._darkMode$.value\n    }\n\n    public _state$: Val<TeleBoxState, boolean>\n\n    public get state(): TeleBoxState {\n        return this._state$.value\n    }\n\n    public setMinimized(data: any, skipUpdate = false) {\n        console.log('mini', data, skipUpdate)\n    }\n    public setMaximized(data: any, skipUpdate = false) {\n        console.log('max', data, skipUpdate)\n    }\n\n    /** @deprecated use setMaximized and setMinimized instead */\n    public setState(state: TeleBoxState, skipUpdate = false): this {\n        console.log(skipUpdate)\n        switch (state) {\n            case TELE_BOX_STATE.Maximized: {\n                // this.setMinimized(false, skipUpdate)\n                // this.setMaximized(true, skipUpdate)\n                break\n            }\n            case TELE_BOX_STATE.Minimized: {\n                // this.setMinimized(true, skipUpdate)\n                // this.setMaximized(false, skipUpdate)\n                break\n            }\n            default: {\n                // this.setMinimized(false, skipUpdate)\n                // this.setMaximized(false, skipUpdate)\n                break\n            }\n        }\n        return this\n    }\n\n    public create(config: TeleBoxManagerCreateConfig = {}, smartPosition = true): ReadonlyTeleBox {\n        const id = config.id || genUID()\n\n        const managerMaximized$ = this.maximizedBoxes$.value.includes(id)\n\n        const managerMinimized$ = this.maximizedBoxes$.value.includes(id)\n\n        const box = new TeleBox({\n            zIndex: this.topBox ? this.topBox.zIndex + 1 : 100,\n            ...(smartPosition ? this.smartPosition(config) : config),\n            darkMode: this.darkMode,\n            prefersColorScheme: this.prefersColorScheme,\n            maximized: managerMaximized$,\n            minimized: managerMinimized$,\n            fence: this.fence,\n            namespace: this.namespace,\n            containerRect: this.containerRect,\n            readonly: this.readonly,\n            collectorRect: this.collectorRect,\n            id\n        })\n\n        box.mount(this.root)\n\n        if (box.focus) {\n            this.focusBox(box)\n            if (smartPosition) {\n                this.makeBoxTop(box)\n            }\n        }\n\n        this.boxes$.setValue([...this.boxes, box])\n\n        box._delegateEvents.on(TELE_BOX_DELEGATE_EVENT.Maximize, () => {\n            this.setMaximizedBoxes(this.boxes$.value.map((item) => item.id))\n            this.maxTitleBar.focusBox(box)\n        })\n        box._delegateEvents.on(TELE_BOX_DELEGATE_EVENT.Minimize, () => {\n            this.setMinimizedBoxes([...this._minimizedBoxes$.value, id])\n        })\n        box._delegateEvents.on(TELE_BOX_DELEGATE_EVENT.Close, () => {\n            this.remove(box)\n            this.makeBoxTopFromMaximized(box.id)\n            this.focusTopBox()\n        })\n        box._coord$.reaction((_, __, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_MANAGER_EVENT.Move, box)\n            }\n        })\n        box._size$.reaction((_, __, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_MANAGER_EVENT.Resize, box)\n            }\n        })\n        box._intrinsicCoord$.reaction((_, __, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_MANAGER_EVENT.IntrinsicMove, box)\n            }\n        })\n        box._intrinsicSize$.reaction((_, __, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_MANAGER_EVENT.IntrinsicResize, box)\n            }\n        })\n        box._visualSize$.reaction((_, __, skipUpdate) => {\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_MANAGER_EVENT.VisualResize, box)\n            }\n        })\n        box._zIndex$.reaction((_, __, skipUpdate) => {\n            if (this.boxes.length > 0) {\n                const topBox = this.boxes.reduce((topBox, box) =>\n                    topBox.zIndex > box.zIndex ? topBox : box\n                )\n                this.topBox$.setValue(topBox)\n            }\n            if (!skipUpdate) {\n                this.events.emit(TELE_BOX_MANAGER_EVENT.ZIndex, box)\n            }\n        })\n        this.events.emit(TELE_BOX_MANAGER_EVENT.Created, box)\n\n        return box\n    }\n\n    public query(config?: TeleBoxManagerQueryConfig): ReadonlyTeleBox[] {\n        return config ? this.boxes.filter(this.teleBoxMatcher(config)) : [...this.boxes]\n    }\n\n    public queryOne(config?: TeleBoxManagerQueryConfig): ReadonlyTeleBox | undefined {\n        return config ? this.boxes.find(this.teleBoxMatcher(config)) : this.boxes[0]\n    }\n\n    public update(boxID: string, config: TeleBoxManagerUpdateConfig, skipUpdate = false): void {\n        const box = this.boxes.find((box) => box.id === boxID)\n        if (box) {\n            return this.updateBox(box, config, skipUpdate)\n        }\n    }\n\n    public updateAll(config: TeleBoxManagerUpdateConfig, skipUpdate = false): void {\n        this.boxes.forEach((box) => {\n            this.updateBox(box, config, skipUpdate)\n        })\n    }\n\n    public remove(boxOrID: string | TeleBox, skipUpdate = false): ReadonlyTeleBox | undefined {\n        const index = this.getBoxIndex(boxOrID)\n        if (index >= 0) {\n            const boxes = this.boxes.slice()\n            const deletedBoxes = boxes.splice(index, 1)\n            this.boxes$.setValue(boxes)\n            deletedBoxes.forEach((box) => box.destroy())\n            const boxId = this.getBox(boxOrID)?.id\n            if (boxId) {\n                this.setMaximizedBoxes(removeByVal(this._maximizedBoxes$.value, boxId))\n                this.setMinimizedBoxes(removeByVal(this._minimizedBoxes$.value, boxId))\n            }\n            if (!skipUpdate) {\n                if (this.boxes.length <= 0) {\n                    this.setMaximizedBoxes([])\n                    this.setMinimizedBoxes([])\n                }\n                this.events.emit(TELE_BOX_MANAGER_EVENT.Removed, deletedBoxes)\n            }\n            return deletedBoxes[0]\n        }\n        return\n    }\n\n    public removeTopBox(): ReadonlyTeleBox | undefined {\n        if (this.topBox) {\n            return this.remove(this.topBox)\n        }\n        return\n    }\n\n    public removeAll(skipUpdate = false): ReadonlyTeleBox[] {\n        const deletedBoxes = this.boxes$.value\n        this.boxes$.setValue([])\n        deletedBoxes.forEach((box) => box.destroy())\n        if (!skipUpdate) {\n            if (this.boxes.length <= 0) {\n                this.setMaximizedBoxes([])\n                this.setMinimizedBoxes([])\n            }\n            this.events.emit(TELE_BOX_MANAGER_EVENT.Removed, deletedBoxes)\n        }\n        return deletedBoxes\n    }\n\n    public destroy(skipUpdate = false): void {\n        this.events.removeAllListeners()\n        this._sideEffect.flushAll()\n        this.removeAll(skipUpdate)\n\n        Object.keys(this).forEach((key) => {\n            const value = this[key as keyof this]\n            if (value instanceof Val) {\n                value.destroy()\n            }\n        })\n    }\n\n    public wrapClassName(className: string): string {\n        return `${this.namespace}-${className}`\n    }\n\n    public focusBox(boxOrID: string | TeleBox, skipUpdate = false): void {\n        const targetBox = this.getBox(boxOrID)\n        if (targetBox) {\n            this.boxes.forEach((box) => {\n                if (targetBox === box) {\n                    let focusChanged = false\n                    if (!targetBox.focus) {\n                        focusChanged = true\n                        targetBox.setFocus(true, skipUpdate)\n                    }\n                    if (focusChanged && !skipUpdate) {\n                        this.events.emit(TELE_BOX_MANAGER_EVENT.Focused, targetBox)\n                    }\n                } else if (box.focus) {\n                    if (!this._maximizedBoxes$.value.includes(box.id)) {\n                        this.blurBox(box, skipUpdate)\n                    }\n                }\n            })\n            if (this._maximizedBoxes$.value.length > 0) {\n                if (this._maximizedBoxes$.value.includes(targetBox.id)) {\n                    this.maxTitleBar.focusBox(targetBox)\n                }\n            } else {\n                this.maxTitleBar.focusBox(targetBox)\n            }\n        }\n    }\n\n    public focusTopBox(): void {\n        if (this.topBox && !this.topBox.focus) {\n            return this.focusBox(this.topBox)\n        }\n    }\n\n    public blurBox(boxOrID: string | TeleBox, skipUpdate = false): void {\n        const targetBox = this.getBox(boxOrID)\n        if (targetBox) {\n            if (targetBox.focus) {\n                targetBox.setFocus(false, skipUpdate)\n                if (!skipUpdate) {\n                    this.events.emit(TELE_BOX_MANAGER_EVENT.Blurred, targetBox)\n                }\n            }\n            if (this.maxTitleBar.focusedBox === targetBox) {\n                this.maxTitleBar.focusBox()\n            }\n        }\n    }\n\n    public blurAll(skipUpdate = false): void {\n        this.boxes.forEach((box) => {\n            if (box.focus) {\n                box.setFocus(false, skipUpdate)\n                if (!skipUpdate) {\n                    this.events.emit(TELE_BOX_MANAGER_EVENT.Blurred, box)\n                }\n            }\n        })\n        if (this.maxTitleBar.focusedBox) {\n            this.maxTitleBar.focusBox()\n        }\n    }\n\n    protected maxTitleBar: MaxTitleBar\n\n    protected boxes$: Val<TeleBox[]>\n    protected topBox$: Val<TeleBox | undefined>\n\n    protected teleBoxMatcher(config: TeleBoxManagerQueryConfig): (box: TeleBox) => boolean {\n        const keys = Object.keys(config) as Array<keyof TeleBoxManagerQueryConfig>\n        return (box: TeleBox): boolean => keys.every((key) => config[key] === box[key])\n    }\n\n    protected updateBox(\n        box: TeleBox,\n        config: TeleBoxManagerUpdateConfig,\n        skipUpdate = false\n    ): void {\n        if (config.x != null || config.y != null) {\n            box.move(\n                config.x == null ? box.intrinsicX : config.x,\n                config.y == null ? box.intrinsicY : config.y,\n                skipUpdate\n            )\n        }\n        if (config.width != null || config.height != null) {\n            box.resize(\n                config.width == null ? box.intrinsicWidth : config.width,\n                config.height == null ? box.intrinsicHeight : config.height,\n                skipUpdate\n            )\n        }\n        if (config.title != null) {\n            box.setTitle(config.title)\n            this.maxTitleBar.updateTitles()\n        }\n        if (config.visible != null) {\n            box.setVisible(config.visible, skipUpdate)\n        }\n        if (config.minHeight != null) {\n            box.setMinHeight(config.minHeight, skipUpdate)\n        }\n        if (config.minWidth != null) {\n            box.setMinWidth(config.minWidth, skipUpdate)\n        }\n        if (config.resizable != null) {\n            box.setResizable(config.resizable, skipUpdate)\n        }\n        if (config.draggable != null) {\n            box.setDraggable(config.draggable, skipUpdate)\n        }\n        if (config.fixRatio != null) {\n            box.setFixRatio(config.fixRatio, skipUpdate)\n        }\n        if (config.zIndex != null) {\n            box.setZIndex(config.zIndex, skipUpdate)\n        }\n        if (config.content != null) {\n            box.mountContent(config.content)\n        }\n        if (config.footer != null) {\n            box.mountFooter(config.footer)\n        }\n    }\n\n    protected smartPosition(config: TeleBoxConfig = {}): TeleBoxConfig {\n        let { x, y } = config\n        const { width = 0.5, height = 0.5 } = config\n\n        if (x == null) {\n            let vx = 20\n            if (this.topBox) {\n                vx = this.topBox.intrinsicX * this.containerRect.width + 20\n\n                if (vx > this.containerRect.width - width * this.containerRect.width) {\n                    vx = 20\n                }\n            }\n            x = vx / this.containerRect.width\n        }\n\n        if (y == null) {\n            let vy = 20\n\n            if (this.topBox) {\n                vy = this.topBox.intrinsicY * this.containerRect.height + 20\n\n                if (vy > this.containerRect.height - height * this.containerRect.height) {\n                    vy = 20\n                }\n            }\n\n            y = vy / this.containerRect.height\n        }\n\n        return { ...config, x, y, width, height }\n    }\n\n    protected makeBoxTop(box: TeleBox, skipUpdate = false): void {\n        if (this.topBox) {\n            if (box !== this.topBox) {\n                if (this._maximizedBoxes$.value.includes(box.id)) {\n                    const newIndex = this.topBox.zIndex + 1\n\n                    const normalBoxesIds = excludeFromBoth(\n                        this.boxes$.value.map((item) => item.id),\n                        this._maximizedBoxes$.value,\n                        this._minimizedBoxes$.value\n                    )\n                    const normalBoxes = this.boxes$.value.filter((box) =>\n                        normalBoxesIds.includes(box.id)\n                    )\n\n                    box._zIndex$.setValue(newIndex, skipUpdate)\n\n                    normalBoxes\n                        .sort((a, b) => a._zIndex$.value - b._zIndex$.value)\n                        .forEach((box, index) => {\n                            box._zIndex$.setValue(newIndex + 1 + index, skipUpdate)\n                        })\n                } else {\n                    box._zIndex$.setValue(this.topBox.zIndex + 1, skipUpdate)\n                }\n            }\n        }\n    }\n\n    protected makeBoxTopFromMaximized(boxId?: string): boolean {\n        let maxIndexBox = undefined\n        if (boxId) {\n            if (\n                this.maximizedBoxes$.value.includes(boxId) &&\n                !this.minimizedBoxes$.value.includes(boxId)\n            ) {\n                maxIndexBox = this.boxes$.value.find((box) => box.id === boxId)\n            }\n        } else {\n            const nextFocusBoxes = this.boxes$.value.filter((box) => {\n                return (\n                    box.id != this.maxTitleBar.focusedBox?.id &&\n                    this.maximizedBoxes$.value.includes(box.id) &&\n                    !this.minimizedBoxes$.value.includes(box.id)\n                )\n            })\n\n            maxIndexBox = nextFocusBoxes.length\n                ? nextFocusBoxes.reduce((maxItem, current) => {\n                      return current._zIndex$.value > maxItem._zIndex$.value ? current : maxItem\n                  })\n                : undefined\n\n            if (maxIndexBox) {\n                this.maxTitleBar.focusBox(maxIndexBox)\n            }\n        }\n\n        return !!maxIndexBox\n    }\n\n    protected getBoxIndex(boxOrID: TeleBox | string): number {\n        return typeof boxOrID === 'string'\n            ? this.boxes.findIndex((box) => box.id === boxOrID)\n            : this.boxes.findIndex((box) => box === boxOrID)\n    }\n\n    protected getBox(boxOrID: TeleBox | string): TeleBox | undefined {\n        return typeof boxOrID === 'string' ? this.boxes.find((box) => box.id === boxOrID) : boxOrID\n    }\n}\n"],"names":["EventEmitter","i","__assign","t","s","e","isProcessing","frame","clamp","alpha","color","r","onRead","onRender","_a","cache","style","o","u","c","TELE_BOX_COLOR_SCHEME","TELE_BOX_STATE","TELE_BOX_EVENT","TELE_BOX_DELEGATE_EVENT","TELE_BOX_RESIZE_HANDLE","index","SideEffectManager","state","createSideEffectBinder","prefersColorScheme","darkMode","title","visible","readonly","zIndex","focus","minimized","maximized","containerRect","collectorRect","withValueEnhancer","styler","_b","_d","_c","TELE_BOX_MANAGER_EVENT","topBox","prefersDark","maximizedBoxes","fence","collector","minimizedBoxes","genUID","box","Val"],"mappings":"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"}